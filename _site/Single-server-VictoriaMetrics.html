<!DOCTYPE html> <html lang="en" dir="auto"> <head><meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=no"> <meta name="description" content="VictoriaMetrics VictoriaMetrics is a fast, cost-effective and scalable monitoring solution and time series database. It is available in binary rele..."> <meta name="revised" content="156072bda364bc719a657b8c14a5f5ba4c757132"> <meta name="author" content="Brensted"> <meta name="generator" content="rundocs/jekyll-rtd-theme v2.0.10"><meta name="theme-color" content="#2980b9"> <title>Single-server-VictoriaMetrics.md · VictoriaMetrics</title> <meta name="twitter:title" content="Single-server-VictoriaMetrics.md · VictoriaMetrics"> <meta name="twitter:description" content="VictoriaMetrics VictoriaMetrics is a fast, cost-effective and scalable monitoring solution and time series database. It is available in binary rele..."> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@Brensted"> <meta name="twitter:url" content="http://localhost:4000/Single-server-VictoriaMetrics.html"> <meta name="twitter:creator" content="@rundocs/jekyll-rtd-theme v2.0.10"> <meta property="og:title" content="Single-server-VictoriaMetrics.md · VictoriaMetrics"> <meta property="og:description" content="VictoriaMetrics VictoriaMetrics is a fast, cost-effective and scalable monitoring solution and time series database. It is available in binary rele..."> <meta property="og:locale" content="en"> <meta property="og:url" content="http://localhost:4000/Single-server-VictoriaMetrics.html"> <meta property="og:type" content="article"> <meta property="article:author" content="Brensted"> <meta property="article:published_time" content="2021-02-25T10:08:59+02:00"> <meta property="article:modified_time" content="2021-02-25T10:28:47+02:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Article", "mainEntityOfPage": { "@type": "WebPage", "@id": "http://localhost:4000/Single-server-VictoriaMetrics.html" }, "headline": "Single-server-VictoriaMetrics.md · VictoriaMetrics", "image": [], "author": { "@type": "Person", "name": "Brensted" }, "datePublished": "2021-02-25T10:08:59+02:00", "dateModified": "2021-02-25T10:28:47+02:00", "publisher": { "@type": "User", "name": "Brensted", "logo": { "@type": "ImageObject", "url": "https://avatars.githubusercontent.com/u/75306281?v=4" } }, "description": "VictoriaMetrics VictoriaMetrics is a fast, cost-effective and scalable monitoring solution and time series database. It is available in binary rele..." } </script> <link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="prev" href="http://localhost:4000/SampleSizeCalculations.html"><link rel="next" href="http://localhost:4000/vmagent.html"><link rel="canonical" href="http://localhost:4000/Single-server-VictoriaMetrics.html"><link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg"><link rel="icon" type="image/png" href="/assets/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/assets/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/assets/images/favicon-96x96.png" sizes="96x96"><link rel="mask-icon" href="/assets/images/favicon.svg" color="#2980b9"><link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-300x300.jpg"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/css/theme.min.css"><script> window.ui = { title: "VictoriaMetrics", baseurl: "", i18n: { search_results: "Search Results", search_results_found: "Search finished, found # page(s) matching the search query.", search_results_not_found: "Your search did not match any documents, please make sure that all characters are spelled correctly!" } }; </script> </head> <body class="container"><div class="sidebar-wrap overflow-hidden"> <div class="sidebar height-full overflow-y-scroll overflow-x-hidden"> <div class="header d-flex flex-column p-3 text-center"> <div class="title pb-1"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/" title="VictoriaMetrics"> <i class="fa fa-home"></i> VictoriaMetrics </a> </div> <span class="version"></span> <form class="search pt-2" action="/search.html" method="get" autocomplete="off"> <input class="form-control input-block input-sm" type="text" name="q" placeholder="Search docs..."> </form> </div> <div class="toctree py-2" data-spy="affix" role="navigation" aria-label="main navigation"> <ul> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/Cluster-VictoriaMetrics.html">Cluster version</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/ExtendedPromQL.html">MetricsQL</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/Home.html">Docs</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/Quick-Start.html">Quick Start</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/Release-Guide.html">Release-Guide.md</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/SampleSizeCalculations.html">Sample size calculations</a> </li> <li class="toc level-1 current" data-sort="" data-level="1"> <a class="d-flex flex-items-baseline current" href="/Single-server-VictoriaMetrics.html">Single-server-VictoriaMetrics.md</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/vmagent.html">vmagent</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/vmalert.html">vmalert</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/vmauth.html">vmauth</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/vmbackup.html">vmbackup</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/vmctl.html">vmctl</a> </li> <li class="toc level-1 " data-sort="" data-level="1"> <a class="d-flex flex-items-baseline " href="/vmrestore.html">vmrestore</a> </li> </ul> </div> </div> </div> <div class="content-wrap"> <div class="header d-flex flex-justify-between p-2 hide-lg hide-xl" aria-label="top navigation"> <button id="toggle" aria-label="Toggle menu" class="btn-octicon p-2 m-0 text-white" type="button"> <i class="fa fa-bars"></i> </button> <div class="title flex-1 d-flex flex-justify-center"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/">VictoriaMetrics</a> </div> </div> <div class="content p-3 p-sm-5"> <div class="navigation-top d-flex flex-justify-between"> <ul class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation"> <li class="breadcrumb-item"> <a class="no-underline" href="/" title="/"> <i class="fa fa-home"></i> </a> </li>
<li class="breadcrumb-item" aria-current="page">Single-server-VictoriaMetrics.md</li>
</ul> <a class="edit" href="https://github.com/Brensted/test1/edit/gh-pages/Single-server-VictoriaMetrics.md" title="Edit on GitHub" rel="noreferrer" target="_blank"> <i class="fa fa-edit"></i> </a> </div> <hr> <div role="main" itemscope="itemscope" itemtype="https://schema.org/Article"> <div class="markdown-body" itemprop="articleBody"> <p><a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases/latest"><img src="https://img.shields.io/github/release/VictoriaMetrics/VictoriaMetrics.svg?style=flat-square" alt="Latest Release"></a> <a href="https://hub.docker.com/r/victoriametrics/victoria-metrics"><img src="https://img.shields.io/docker/pulls/victoriametrics/victoria-metrics.svg?maxAge=604800" alt="Docker Pulls"></a> <a href="http://slack.victoriametrics.com/"><img src="https://img.shields.io/badge/join%20slack-%23victoriametrics-brightgreen.svg" alt="Slack"></a> <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/blob/master/LICENSE"><img src="https://img.shields.io/github/license/VictoriaMetrics/VictoriaMetrics.svg" alt="GitHub license"></a> <a href="https://goreportcard.com/report/github.com/VictoriaMetrics/VictoriaMetrics"><img src="https://goreportcard.com/badge/github.com/VictoriaMetrics/VictoriaMetrics" alt="Go Report"></a> <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/actions"><img src="https://github.com/VictoriaMetrics/VictoriaMetrics/workflows/main/badge.svg" alt="Build Status"></a> <a href="https://codecov.io/gh/VictoriaMetrics/VictoriaMetrics"><img src="https://codecov.io/gh/VictoriaMetrics/VictoriaMetrics/branch/master/graph/badge.svg" alt="codecov"></a></p> <p><img src="logo.png" alt="Victoria Metrics logo" title="Victoria Metrics"></p> <h2 id="victoriametrics">VictoriaMetrics</h2> <p>VictoriaMetrics is a fast, cost-effective and scalable monitoring solution and time series database.</p> <p>It is available in <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases">binary releases</a>, <a href="https://hub.docker.com/r/victoriametrics/victoria-metrics/">docker images</a>, <a href="https://snapcraft.io/victoriametrics">Snap package</a> and in <a href="https://github.com/VictoriaMetrics/VictoriaMetrics">source code</a>. Just download VictoriaMetrics and see <a href="#how-to-start-victoriametrics">how to start it</a>. If you use Ubuntu, then just run <code class="language-plaintext highlighter-rouge notranslate">snap install victoriametrics</code> in order to install and run it. Then read <a href="#prometheus-setup">Prometheus setup</a> and <a href="#grafana-setup">Grafana setup</a> docs.</p> <p>Cluster version is available <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/tree/cluster">here</a>.</p> <p>See additional docs at our <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/wiki">Wiki</a>.</p> <p><a href="mailto:info@victoriametrics.com">Contact us</a> if you need paid enterprise support for VictoriaMetrics. See <a href="https://victoriametrics.com/enterprise.html">features available for enterprise customers</a>.</p> <h2 id="case-studies-and-talks">Case studies and talks</h2> <p>Alphabetically sorted links to case studies:</p> <ul> <li><a href="https://victoriametrics.github.io/CaseStudies.html#adidas">adidas</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#adsterra">Adsterra</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#arnes">ARNES</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#brandwatch">Brandwatch</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#cern">CERN</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#colopl">COLOPL</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#dreamteam">Dreamteam</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#idealode">Idealo.de</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#mhi-vestas-offshore-wind">MHI Vestas Offshore Wind</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#synthesio">Synthesio</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#wedoscom">Wedos.com</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#wixcom">Wix.com</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#zerodha">Zerodha</a></li> <li><a href="https://victoriametrics.github.io/CaseStudies.html#zhihu">zhihu</a></li> </ul> <h2 id="prominent-features">Prominent features</h2> <ul> <li>VictoriaMetrics can be used as long-term storage for Prometheus or for <a href="https://victoriametrics.github.io/vmagent.html">vmagent</a>. See <a href="#prometheus-setup">these docs</a> for details.</li> <li>VictoriaMetrics supports <a href="https://prometheus.io/docs/prometheus/latest/querying/api/">Prometheus querying API</a>, so it can be used as Prometheus drop-in replacement in Grafana.</li> <li>VictoriaMetrics implements <a href="https://victoriametrics.github.io/MetricsQL.html">MetricsQL</a> query language backwards compatible with PromQL.</li> <li>VictoriaMetrics provides global query view. Multiple Prometheus instances or any other data sources may ingest data into VictoriaMetrics. Later this data may be queried via a single query.</li> <li>High performance and good scalability for both <a href="https://medium.com/@valyala/high-cardinality-tsdb-benchmarks-victoriametrics-vs-timescaledb-vs-influxdb-13e6ee64dd6b">inserts</a> and <a href="https://medium.com/@valyala/when-size-matters-benchmarking-victoriametrics-vs-timescale-and-influxdb-6035811952d4">selects</a>. <a href="https://medium.com/@valyala/measuring-vertical-scalability-for-time-series-databases-in-google-cloud-92550d78d8ae">Outperforms InfluxDB and TimescaleDB by up to 20x</a>.</li> <li>
<a href="https://medium.com/@valyala/insert-benchmarks-with-inch-influxdb-vs-victoriametrics-e31a41ae2893">Uses 10x less RAM than InfluxDB</a> and <a href="https://valyala.medium.com/prometheus-vs-victoriametrics-benchmark-on-node-exporter-metrics-4ca29c75590f">up to 7x less RAM than Prometheus, Thanos or Cortex</a> when dealing with millions of unique time series (aka high cardinality).</li> <li>Optimized for time series with high churn rate. Think about <a href="https://github.com/coreos/prometheus-operator">prometheus-operator</a> metrics from frequent deployments in Kubernetes.</li> <li>High data compression, so <a href="https://medium.com/@valyala/when-size-matters-benchmarking-victoriametrics-vs-timescale-and-influxdb-6035811952d4">up to 70x more data points</a> may be crammed into limited storage comparing to TimescaleDB and <a href="https://valyala.medium.com/prometheus-vs-victoriametrics-benchmark-on-node-exporter-metrics-4ca29c75590f">up to 7x less storage space is required comparing to Prometheus, Thanos or Cortex</a>.</li> <li>Optimized for storage with high-latency IO and low IOPS (HDD and network storage in AWS, Google Cloud, Microsoft Azure, etc). See <a href="https://medium.com/@valyala/high-cardinality-tsdb-benchmarks-victoriametrics-vs-timescaledb-vs-influxdb-13e6ee64dd6b">graphs from these benchmarks</a>.</li> <li>A single-node VictoriaMetrics may substitute moderately sized clusters built with competing solutions such as Thanos, M3DB, Cortex, InfluxDB or TimescaleDB. See <a href="https://medium.com/@valyala/measuring-vertical-scalability-for-time-series-databases-in-google-cloud-92550d78d8ae">vertical scalability benchmarks</a>, <a href="https://medium.com/@valyala/comparing-thanos-to-victoriametrics-cluster-b193bea1683">comparing Thanos to VictoriaMetrics cluster</a> and <a href="https://promcon.io/2019-munich/talks/remote-write-storage-wars/">Remote Write Storage Wars</a> talk from <a href="https://promcon.io/2019-munich/talks/remote-write-storage-wars/">PromCon 2019</a>.</li> <li>Easy operation: <ul> <li>VictoriaMetrics consists of a single <a href="https://medium.com/@valyala/stripping-dependency-bloat-in-victoriametrics-docker-image-983fb5912b0d">small executable</a> without external dependencies.</li> <li>All the configuration is done via explicit command-line flags with reasonable defaults.</li> <li>All the data is stored in a single directory pointed by <code class="language-plaintext highlighter-rouge notranslate">-storageDataPath</code> command-line flag.</li> <li>Easy and fast backups from <a href="https://medium.com/@valyala/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282">instant snapshots</a> to S3 or GCS with <a href="https://victoriametrics.github.io/vmbackup.html">vmbackup</a> / <a href="https://victoriametrics.github.io/vmrestore.html">vmrestore</a>. See <a href="https://medium.com/@valyala/speeding-up-backups-for-big-time-series-databases-533c1a927883">this article</a> for more details.</li> </ul> </li> <li>Storage is protected from corruption on unclean shutdown (i.e. OOM, hardware reset or <code class="language-plaintext highlighter-rouge notranslate">kill -9</code>) thanks to <a href="https://medium.com/@valyala/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282">the storage architecture</a>.</li> <li>Supports metrics' scraping, ingestion and <a href="#backfilling">backfilling</a> via the following protocols: <ul> <li>
<a href="https://github.com/prometheus/docs/blob/master/content/docs/instrumenting/exposition_formats.md#text-based-format">Metrics from Prometheus exporters</a> such as <a href="https://github.com/prometheus/node_exporter">node_exporter</a>. See <a href="#how-to-scrape-prometheus-exporters-such-as-node-exporter">these docs</a> for details.</li> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write">Prometheus remote write API</a></li> <li>
<a href="#how-to-send-data-from-influxdb-compatible-agents-such-as-telegraf">InfluxDB line protocol</a> over HTTP, TCP and UDP.</li> <li>
<a href="#how-to-send-data-from-graphite-compatible-agents-such-as-statsd">Graphite plaintext protocol</a> with <a href="https://graphite.readthedocs.io/en/latest/tags.html#carbon">tags</a> if <code class="language-plaintext highlighter-rouge notranslate">-graphiteListenAddr</code> is set.</li> <li>
<a href="#sending-data-via-telnet-put-protocol">OpenTSDB put message</a> if <code class="language-plaintext highlighter-rouge notranslate">-opentsdbListenAddr</code> is set.</li> <li>
<a href="#sending-opentsdb-data-via-http-apiput-requests">HTTP OpenTSDB /api/put requests</a> if <code class="language-plaintext highlighter-rouge notranslate">-opentsdbHTTPListenAddr</code> is set.</li> <li>
<a href="#how-to-import-data-in-json-line-format">JSON line format</a>.</li> <li>
<a href="#how-to-import-data-in-native-format">Native binary format</a>.</li> <li>
<a href="#how-to-import-data-in-prometheus-exposition-format">Prometheus exposition format</a>.</li> <li>
<a href="#how-to-import-csv-data">Arbitrary CSV data</a>.</li> </ul> </li> <li>Supports metrics' relabeling. See <a href="#relabeling">these docs</a> for details.</li> <li>Ideally works with big amounts of time series data from Kubernetes, IoT sensors, connected cars, industrial telemetry, financial data and various Enterprise workloads.</li> <li>Has open source <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/tree/cluster">cluster version</a>.</li> <li>See also technical <a href="https://victoriametrics.github.io/Articles.html">Articles about VictoriaMetrics</a>.</li> </ul> <h2 id="operation">Operation</h2> <h3 id="table-of-contents">Table of contents</h3> <ul> <li>
<a href="#how-to-start-victoriametrics">How to start VictoriaMetrics</a> <ul> <li><a href="#environment-variables">Environment variables</a></li> <li><a href="#configuration-with-snap-package">Configuration with snap package</a></li> </ul> </li> <li><a href="#prometheus-setup">Prometheus setup</a></li> <li><a href="#grafana-setup">Grafana setup</a></li> <li><a href="#how-to-upgrade-victoriametrics">How to upgrade VictoriaMetrics</a></li> <li><a href="#how-to-apply-new-config-to-victoriametrics">How to apply new config to VictoriaMetrics</a></li> <li><a href="#how-to-scrape-prometheus-exporters-such-as-node-exporter">How to scrape Prometheus exporters such as node_exporter</a></li> <li><a href="#how-to-send-data-from-influxdb-compatible-agents-such-as-telegraf">How to send data from InfluxDB-compatible agents such as Telegraf</a></li> <li><a href="#how-to-send-data-from-graphite-compatible-agents-such-as-statsd">How to send data from Graphite-compatible agents such as StatsD</a></li> <li><a href="#querying-graphite-data">Querying Graphite data</a></li> <li><a href="#how-to-send-data-from-opentsdb-compatible-agents">How to send data from OpenTSDB-compatible agents</a></li> <li>
<a href="#prometheus-querying-api-usage">Prometheus querying API usage</a> <ul> <li><a href="#prometheus-querying-api-enhancements">Prometheus querying API enhancements</a></li> </ul> </li> <li>
<a href="#graphite-api-usage">Graphite API usage</a> <ul> <li><a href="#graphite-metrics-api-usage">Graphite Metrics API usage</a></li> <li><a href="#graphite-tags-api-usage">Graphite Tags API usage</a></li> </ul> </li> <li>
<a href="#how-to-build-from-sources">How to build from sources</a> <ul> <li><a href="#development-build">Development build</a></li> <li><a href="#production-build">Production build</a></li> <li><a href="#arm-build">ARM build</a></li> <li><a href="#pure-go-build-cgo_enabled0">Pure Go build (CGO_ENABLED=0)</a></li> <li><a href="#building-docker-images">Building docker images</a></li> </ul> </li> <li><a href="#start-with-docker-compose">Start with docker-compose</a></li> <li><a href="#setting-up-service">Setting up service</a></li> <li><a href="#how-to-work-with-snapshots">How to work with snapshots</a></li> <li><a href="#how-to-delete-time-series">How to delete time series</a></li> <li><a href="#forced-merge">Forced merge</a></li> <li>
<a href="#how-to-export-time-series">How to export time series</a> <ul> <li><a href="#how-to-export-data-in-native-format">How to export data in native format</a></li> <li><a href="#how-to-export-data-in-json-line-format">How to export data in JSON line format</a></li> <li><a href="#how-to-export-csv-data">How to export CSV data</a></li> </ul> </li> <li>
<a href="#how-to-import-time-series-data">How to import time series data</a> <ul> <li><a href="#how-to-import-data-in-native-format">How to import data in native format</a></li> <li><a href="#how-to-import-data-in-json-line-format">How to import data in json line format</a></li> <li><a href="#how-to-import-csv-data">How to import CSV data</a></li> <li><a href="#how-to-import-data-in-prometheus-exposition-format">How to import data in Prometheus exposition format</a></li> </ul> </li> <li><a href="#relabeling">Relabeling</a></li> <li><a href="#federation">Federation</a></li> <li><a href="#capacity-planning">Capacity planning</a></li> <li><a href="#high-availability">High availability</a></li> <li><a href="#deduplication">Deduplication</a></li> <li><a href="#retention">Retention</a></li> <li><a href="#multiple-retentions">Multiple retentions</a></li> <li><a href="#downsampling">Downsampling</a></li> <li><a href="#multi-tenancy">Multi-tenancy</a></li> <li><a href="#scalability-and-cluster-version">Scalability and cluster version</a></li> <li><a href="#alerting">Alerting</a></li> <li><a href="#security">Security</a></li> <li><a href="#tuning">Tuning</a></li> <li><a href="#monitoring">Monitoring</a></li> <li><a href="#troubleshooting">Troubleshooting</a></li> <li><a href="#data-migration">Data migration</a></li> <li><a href="#backfilling">Backfilling</a></li> <li><a href="#data-updates">Data updates</a></li> <li><a href="#replication">Replication</a></li> <li><a href="#backups">Backups</a></li> <li><a href="#profiling">Profiling</a></li> <li><a href="#integrations">Integrations</a></li> <li><a href="#third-party-contributions">Third-party contributions</a></li> <li><a href="#contacts">Contacts</a></li> <li><a href="#community-and-contributions">Community and contributions</a></li> <li><a href="#reporting-bugs">Reporting bugs</a></li> <li>
<a href="#victoria-metrics-logo">Victoria Metrics Logo</a> <ul> <li>
<a href="#logo-usage-guidelines">Logo Usage Guidelines</a> <ul> <li><a href="#font-used">Font used</a></li> <li><a href="#color-palette">Color Palette</a></li> </ul> </li> <li><a href="#we-kindly-ask">We kindly ask</a></li> </ul> </li> </ul> <h2 id="how-to-start-victoriametrics">How to start VictoriaMetrics</h2> <p>Start VictoriaMetrics <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases">executable</a> or <a href="https://hub.docker.com/r/victoriametrics/victoria-metrics/">docker image</a> with the desired command-line flags.</p> <p>The following command-line flags are used the most:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">-storageDataPath</code> - path to data directory. VictoriaMetrics stores all the data in this directory. Default path is <code class="language-plaintext highlighter-rouge notranslate">victoria-metrics-data</code> in the current working directory.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod</code> - retention for stored data. Older data is automatically deleted. Default retention is 1 month. See <a href="#retention">these docs</a> for more details.</li> </ul> <p>Other flags have good enough default values, so set them only if you really need this. Pass <code class="language-plaintext highlighter-rouge notranslate">-help</code> to see all the available flags with description and default values.</p> <p>See how to <a href="#how-to-import-time-series-data">ingest data to VictoriaMetrics</a>, how to <a href="#grafana-setup">query VictoriaMetrics</a> and how to <a href="#alerting">handle alerts</a>. VictoriaMetrics accepts <a href="#prometheus-querying-api-usage">Prometheus querying API requests</a> on port <code class="language-plaintext highlighter-rouge notranslate">8428</code> by default.</p> <p>It is recommended setting up <a href="#monitoring">monitoring</a> for VictoriaMetrics.</p> <h3 id="environment-variables">Environment variables</h3> <p>Each flag value can be set via environment variables according to these rules:</p> <ul> <li>The <code class="language-plaintext highlighter-rouge notranslate">-envflag.enable</code> flag must be set</li> <li>Each <code class="language-plaintext highlighter-rouge notranslate">.</code> char in flag name must be substituted by <code class="language-plaintext highlighter-rouge notranslate">_</code> (for example <code class="language-plaintext highlighter-rouge notranslate">-insert.maxQueueDuration &lt;duration&gt;</code> will translate to <code class="language-plaintext highlighter-rouge notranslate">insert_maxQueueDuration=&lt;duration&gt;</code>)</li> <li>For repeating flags an alternative syntax can be used by joining the different values into one using <code class="language-plaintext highlighter-rouge notranslate">,</code> char as separator (for example <code class="language-plaintext highlighter-rouge notranslate">-storageNode &lt;nodeA&gt; -storageNode &lt;nodeB&gt;</code> will translate to <code class="language-plaintext highlighter-rouge notranslate">storageNode=&lt;nodeA&gt;,&lt;nodeB&gt;</code>)</li> <li>It is possible setting prefix for environment vars with <code class="language-plaintext highlighter-rouge notranslate">-envflag.prefix</code>. For instance, if <code class="language-plaintext highlighter-rouge notranslate">-envflag.prefix=VM_</code>, then env vars must be prepended with <code class="language-plaintext highlighter-rouge notranslate">VM_</code>
</li> </ul> <h3 id="configuration-with-snap-package">Configuration with snap package</h3> <p>Command-line flags can be changed with following command:</p> <div class="language-text highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>echo 'FLAGS="-selfScrapeInterval=10s -search.logSlowQueryDuration=20s"' &gt; $SNAP_DATA/var/snap/victoriametrics/current/extra_flags
snap restart victoriametrics
</code></pre>  </div></div> <p>Or add needed command-line flags to the file <code class="language-plaintext highlighter-rouge notranslate">$SNAP_DATA/var/snap/victoriametrics/current/extra_flags</code>.</p> <p>Note you cannot change value for <code class="language-plaintext highlighter-rouge notranslate">-storageDataPath</code> flag, for safety snap package has limited access to host system.</p> <p>Changing scrape configuration is possible with text editor: <code class="language-plaintext highlighter-rouge notranslate">text vi $SNAP_DATA/var/snap/victoriametrics/current/etc/victoriametrics-scrape-config.yaml </code> After changes was made, trigger config re-read with command <code class="language-plaintext highlighter-rouge notranslate">curl 127.0.0.1:8248/-/reload</code>.</p> <h2 id="prometheus-setup">Prometheus setup</h2> <p>Prometheus must be configured with <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write">remote_write</a> in order to send data to VictoriaMetrics. Add the following lines to Prometheus config file (it is usually located at <code class="language-plaintext highlighter-rouge notranslate">/etc/prometheus/prometheus.yml</code>):</p> <div class="language-yml highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="na">remote_write</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">url</span><span class="pi">:</span> <span class="s">http://&lt;victoriametrics-addr&gt;:8428/api/v1/write</span>
</code></pre>  </div></div> <p>Substitute <code class="language-plaintext highlighter-rouge notranslate">&lt;victoriametrics-addr&gt;</code> with hostname or IP address of VictoriaMetrics. Then apply new config via the following command:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="nb">kill</span> <span class="nt">-HUP</span> <span class="sb">`</span>pidof prometheus<span class="sb">`</span>
</code></pre>  </div></div> <p>Prometheus writes incoming data to local storage and replicates it to remote storage in parallel. This means that data remains available in local storage for <code class="language-plaintext highlighter-rouge notranslate">--storage.tsdb.retention.time</code> duration even if remote storage is unavailable.</p> <p>If you plan to send data to VictoriaMetrics from multiple Prometheus instances, then add the following lines into <code class="language-plaintext highlighter-rouge notranslate">global</code> section of <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#configuration-file">Prometheus config</a>:</p> <div class="language-yml highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="na">global</span><span class="pi">:</span>
  <span class="na">external_labels</span><span class="pi">:</span>
    <span class="na">datacenter</span><span class="pi">:</span> <span class="s">dc-123</span>
</code></pre>  </div></div> <p>This instructs Prometheus to add <code class="language-plaintext highlighter-rouge notranslate">datacenter=dc-123</code> label to each time series sent to remote storage. The label name can be arbitrary - <code class="language-plaintext highlighter-rouge notranslate">datacenter</code> is just an example. The label value must be unique across Prometheus instances, so those time series may be filtered and grouped by this label.</p> <p>For highly loaded Prometheus instances (400k+ samples per second) the following tuning may be applied:</p> <div class="language-yaml highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="na">remote_write</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">url</span><span class="pi">:</span> <span class="s">http://&lt;victoriametrics-addr&gt;:8428/api/v1/write</span>
    <span class="na">queue_config</span><span class="pi">:</span>
      <span class="na">max_samples_per_send</span><span class="pi">:</span> <span class="m">10000</span>
      <span class="na">capacity</span><span class="pi">:</span> <span class="m">20000</span>
      <span class="na">max_shards</span><span class="pi">:</span> <span class="m">30</span>
</code></pre>  </div></div> <p>Using remote write increases memory usage for Prometheus up to ~25% and depends on the shape of data. If you are experiencing issues with too high memory consumption try to lower <code class="language-plaintext highlighter-rouge notranslate">max_samples_per_send</code> and <code class="language-plaintext highlighter-rouge notranslate">capacity</code> params (keep in mind that these two params are tightly connected). Read more about tuning remote write for Prometheus <a href="https://prometheus.io/docs/practices/remote_write">here</a>.</p> <p>It is recommended upgrading Prometheus to <a href="https://github.com/prometheus/prometheus/releases">v2.12.0</a> or newer, since previous versions may have issues with <code class="language-plaintext highlighter-rouge notranslate">remote_write</code>.</p> <p>Take a look also at <a href="https://victoriametrics.github.io/vmagent.html">vmagent</a> and <a href="https://victoriametrics.github.io/vmalert.html">vmalert</a>, which can be used as faster and less resource-hungry alternative to Prometheus.</p> <h2 id="grafana-setup">Grafana setup</h2> <p>Create <a href="http://docs.grafana.org/features/datasources/prometheus/">Prometheus datasource</a> in Grafana with the following url:</p>
<pre><code class="language-url">http://&lt;victoriametrics-addr&gt;:8428
</code></pre>  <p>Substitute <code class="language-plaintext highlighter-rouge notranslate">&lt;victoriametrics-addr&gt;</code> with the hostname or IP address of VictoriaMetrics.</p> <p>Then build graphs with the created datasource using <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/">PromQL</a> or <a href="https://victoriametrics.github.io/MetricsQL.html">MetricsQL</a>. VictoriaMetrics supports <a href="#prometheus-querying-api-usage">Prometheus querying API</a>, which is used by Grafana.</p> <h2 id="how-to-upgrade-victoriametrics">How to upgrade VictoriaMetrics</h2> <p>It is safe upgrading VictoriaMetrics to new versions unless <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases">release notes</a> say otherwise. It is safe skipping multiple versions during the upgrade unless <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases">release notes</a> say otherwise. It is recommended performing regular upgrades to the latest version, since it may contain important bug fixes, performance optimizations or new features.</p> <p>It is also safe downgrading to the previous version unless <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases">release notes</a> say otherwise.</p> <p>The following steps must be performed during the upgrade / downgrade:</p> <ul> <li>Send <code class="language-plaintext highlighter-rouge notranslate">SIGINT</code> signal to VictoriaMetrics process in order to gracefully stop it.</li> <li>Wait until the process stops. This can take a few seconds.</li> <li>Start the upgraded VictoriaMetrics.</li> </ul> <p>Prometheus doesn't drop data during VictoriaMetrics restart. See <a href="https://grafana.com/blog/2019/03/25/whats-new-in-prometheus-2.8-wal-based-remote-write/">this article</a> for details.</p> <h2 id="how-to-apply-new-config-to-victoriametrics">How to apply new config to VictoriaMetrics</h2> <p>VictoriaMetrics is configured via command-line flags, so it must be restarted when new command-line flags should be applied:</p> <ul> <li>Send <code class="language-plaintext highlighter-rouge notranslate">SIGINT</code> signal to VictoriaMetrics process in order to gracefully stop it.</li> <li>Wait until the process stops. This can take a few seconds.</li> <li>Start VictoriaMetrics with the new command-line flags.</li> </ul> <p>Prometheus doesn't drop data during VictoriaMetrics restart. See <a href="https://grafana.com/blog/2019/03/25/whats-new-in-prometheus-2.8-wal-based-remote-write/">this article</a> for details.</p> <h2 id="how-to-scrape-prometheus-exporters-such-as-node-exporter">How to scrape Prometheus exporters such as <a href="https://github.com/prometheus/node_exporter">node-exporter</a>
</h2> <p>VictoriaMetrics can be used as drop-in replacement for Prometheus for scraping targets configured in <code class="language-plaintext highlighter-rouge notranslate">prometheus.yml</code> config file according to <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#configuration-file">the specification</a>. Just set <code class="language-plaintext highlighter-rouge notranslate">-promscrape.config</code> command-line flag to the path to <code class="language-plaintext highlighter-rouge notranslate">prometheus.yml</code> config - and VictoriaMetrics should start scraping the configured targets. Currently the following <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#scrape_config">scrape_config</a> types are supported:</p> <ul> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#static_config">static_config</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#file_sd_config">file_sd_config</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#kubernetes_sd_config">kubernetes_sd_config</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#ec2_sd_config">ec2_sd_config</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#gce_sd_config">gce_sd_config</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#consul_sd_config">consul_sd_config</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#dns_sd_config">dns_sd_config</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#openstack_sd_config">openstack_sd_config</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#dockerswarm_sd_config">dockerswarm_sd_config</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#eureka_sd_config">eureka_sd_config</a></li> </ul> <p>Other <code class="language-plaintext highlighter-rouge notranslate">*_sd_config</code> types will be supported in the future.</p> <p>The file pointed by <code class="language-plaintext highlighter-rouge notranslate">-promscrape.config</code> may contain <code class="language-plaintext highlighter-rouge notranslate">%{ENV_VAR}</code> placeholders, which are substituted by the corresponding <code class="language-plaintext highlighter-rouge notranslate">ENV_VAR</code> environment variable values.</p> <p>VictoriaMetrics also supports <a href="#how-to-import-data-in-prometheus-exposition-format">importing data in Prometheus exposition format</a>.</p> <p>See also <a href="https://victoriametrics.github.io/vmagent.html">vmagent</a>, which can be used as drop-in replacement for Prometheus.</p> <h2 id="how-to-send-data-from-influxdb-compatible-agents-such-as-telegraf">How to send data from InfluxDB-compatible agents such as <a href="https://www.influxdata.com/time-series-platform/telegraf/">Telegraf</a>
</h2> <p>Use <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoriametric-addr&gt;:8428</code> url instead of InfluxDB url in agents' configs. For instance, put the following lines into <code class="language-plaintext highlighter-rouge notranslate">Telegraf</code> config, so it sends data to VictoriaMetrics instead of InfluxDB:</p> <div class="language-toml highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="nn">[[outputs.influxdb]]</span>
  <span class="py">urls</span> <span class="p">=</span> <span class="nn">["http://&lt;victoriametrics-addr&gt;:8428"]</span>
</code></pre>  </div></div> <p>Another option is to enable TCP and UDP receiver for Influx line protocol via <code class="language-plaintext highlighter-rouge notranslate">-influxListenAddr</code> command-line flag and stream plain Influx line protocol data to the configured TCP and/or UDP addresses.</p> <p>VictoriaMetrics maps Influx data using the following rules:</p> <ul> <li>
<a href="https://docs.influxdata.com/influxdb/v1.7/tools/api/#write-http-endpoint"><code class="language-plaintext highlighter-rouge notranslate">db</code> query arg</a> is mapped into <code class="language-plaintext highlighter-rouge notranslate">db</code> label value unless <code class="language-plaintext highlighter-rouge notranslate">db</code> tag exists in the Influx line.</li> <li>Field names are mapped to time series names prefixed with <code class="language-plaintext highlighter-rouge notranslate">{measurement}{separator}</code> value, where <code class="language-plaintext highlighter-rouge notranslate">{separator}</code> equals to <code class="language-plaintext highlighter-rouge notranslate">_</code> by default. It can be changed with <code class="language-plaintext highlighter-rouge notranslate">-influxMeasurementFieldSeparator</code> command-line flag. See also <code class="language-plaintext highlighter-rouge notranslate">-influxSkipSingleField</code> command-line flag. If <code class="language-plaintext highlighter-rouge notranslate">{measurement}</code> is empty or <code class="language-plaintext highlighter-rouge notranslate">-influxSkipMeasurement</code> command-line flag is set, then time series names correspond to field names.</li> <li>Field values are mapped to time series values.</li> <li>Tags are mapped to Prometheus labels as-is.</li> </ul> <p>For example, the following Influx line:</p>
<pre><code class="language-raw">foo,tag1=value1,tag2=value2 field1=12,field2=40
</code></pre>  <p>is converted into the following Prometheus data points:</p>
<pre><code class="language-raw">foo_field1{tag1="value1", tag2="value2"} 12
foo_field2{tag1="value1", tag2="value2"} 40
</code></pre>  <p>Example for writing data with <a href="https://docs.influxdata.com/influxdb/v1.7/write_protocols/line_protocol_tutorial/">Influx line protocol</a> to local VictoriaMetrics using <code class="language-plaintext highlighter-rouge notranslate">curl</code>:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-d</span> <span class="s1">'measurement,tag1=value1,tag2=value2 field1=123,field2=1.23'</span> <span class="nt">-X</span> POST <span class="s1">'http://localhost:8428/write'</span>
</code></pre>  </div></div> <p>An arbitrary number of lines delimited by ‘\n' (aka newline char) can be sent in a single request. After that the data may be read via <a href="#how-to-export-data-in-json-line-format">/api/v1/export</a> endpoint:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-G</span> <span class="s1">'http://localhost:8428/api/v1/export'</span> <span class="nt">-d</span> <span class="s1">'match={__name__=~"measurement_.*"}'</span>
</code></pre>  </div></div> <p>The <code class="language-plaintext highlighter-rouge notranslate">/api/v1/export</code> endpoint should return the following response:</p>
<pre><code class="language-jsonl">{"metric":{"__name__":"measurement_field1","tag1":"value1","tag2":"value2"},"values":[123],"timestamps":[1560272508147]}
{"metric":{"__name__":"measurement_field2","tag1":"value1","tag2":"value2"},"values":[1.23],"timestamps":[1560272508147]}
</code></pre>  <p>Note that Influx line protocol expects <a href="https://docs.influxdata.com/influxdb/v1.7/write_protocols/line_protocol_tutorial/#timestamp">timestamps in <em>nanoseconds</em> by default</a>, while VictoriaMetrics stores them with <em>milliseconds</em> precision.</p> <p>Extra labels may be added to all the written time series by passing <code class="language-plaintext highlighter-rouge notranslate">extra_label=name=value</code> query args. For example, <code class="language-plaintext highlighter-rouge notranslate">/write?extra_label=foo=bar</code> would add <code class="language-plaintext highlighter-rouge notranslate">{foo="bar"}</code> label to all the ingested metrics.</p> <h2 id="how-to-send-data-from-graphite-compatible-agents-such-as-statsd">How to send data from Graphite-compatible agents such as <a href="https://github.com/etsy/statsd">StatsD</a>
</h2> <p>Enable Graphite receiver in VictoriaMetrics by setting <code class="language-plaintext highlighter-rouge notranslate">-graphiteListenAddr</code> command line flag. For instance, the following command will enable Graphite receiver in VictoriaMetrics on TCP and UDP port <code class="language-plaintext highlighter-rouge notranslate">2003</code>:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>/path/to/victoria-metrics-prod <span class="nt">-graphiteListenAddr</span><span class="o">=</span>:2003
</code></pre>  </div></div> <p>Use the configured address in Graphite-compatible agents. For instance, set <code class="language-plaintext highlighter-rouge notranslate">graphiteHost</code> to the VictoriaMetrics host in <code class="language-plaintext highlighter-rouge notranslate">StatsD</code> configs.</p> <p>Example for writing data with Graphite plaintext protocol to local VictoriaMetrics using <code class="language-plaintext highlighter-rouge notranslate">nc</code>:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"foo.bar.baz;tag1=value1;tag2=value2 123 </span><span class="sb">`</span><span class="nb">date</span> +%s<span class="sb">`</span><span class="s2">"</span> | nc <span class="nt">-N</span> localhost 2003
</code></pre>  </div></div> <p>VictoriaMetrics sets the current time if the timestamp is omitted. An arbitrary number of lines delimited by <code class="language-plaintext highlighter-rouge notranslate">\n</code> (aka newline char) can be sent in one go. After that the data may be read via <a href="#how-to-export-data-in-json-line-format">/api/v1/export</a> endpoint:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-G</span> <span class="s1">'http://localhost:8428/api/v1/export'</span> <span class="nt">-d</span> <span class="s1">'match=foo.bar.baz'</span>
</code></pre>  </div></div> <p>The <code class="language-plaintext highlighter-rouge notranslate">/api/v1/export</code> endpoint should return the following response:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="o">{</span><span class="s2">"metric"</span>:<span class="o">{</span><span class="s2">"__name__"</span>:<span class="s2">"foo.bar.baz"</span>,<span class="s2">"tag1"</span>:<span class="s2">"value1"</span>,<span class="s2">"tag2"</span>:<span class="s2">"value2"</span><span class="o">}</span>,<span class="s2">"values"</span>:[123],<span class="s2">"timestamps"</span>:[1560277406000]<span class="o">}</span>
</code></pre>  </div></div> <h2 id="querying-graphite-data">Querying Graphite data</h2> <p>Data sent to VictoriaMetrics via <code class="language-plaintext highlighter-rouge notranslate">Graphite plaintext protocol</code> may be read via the following APIs:</p> <ul> <li><a href="#graphite-api-usage">Graphite API</a></li> <li>
<a href="#prometheus-querying-api-usage">Prometheus querying API</a>. Graphite metric names may special chars such as <code class="language-plaintext highlighter-rouge notranslate">-</code>, which may clash with <a href="https://victoriametrics.github.io/MetricsQL.html">MetricsQL operations</a>. Such metrics can be queries via <code class="language-plaintext highlighter-rouge notranslate">{__name__="foo-bar.baz"}</code>. VictoriaMetrics supports <code class="language-plaintext highlighter-rouge notranslate">__graphite__</code> pseudo-label for selecting time series with Graphite-compatible filters in <a href="https://victoriametrics.github.io/MetricsQL.html">MetricsQL</a>. For example, <code class="language-plaintext highlighter-rouge notranslate">{__graphite__="foo.*.bar"}</code> is equivalent to <code class="language-plaintext highlighter-rouge notranslate">{__name__=~"foo[.][^.]*[.]bar"}</code>, but it works faster and it is easier to use when migrating from Graphite to VictoriaMetrics.</li> <li><a href="https://github.com/go-graphite/carbonapi/blob/main/cmd/carbonapi/carbonapi.example.victoriametrics.yaml">go-graphite/carbonapi</a></li> </ul> <h2 id="how-to-send-data-from-opentsdb-compatible-agents">How to send data from OpenTSDB-compatible agents</h2> <p>VictoriaMetrics supports <a href="http://opentsdb.net/docs/build/html/api_telnet/put.html">telnet put protocol</a> and <a href="http://opentsdb.net/docs/build/html/api_http/put.html">HTTP /api/put requests</a> for ingesting OpenTSDB data. The same protocol is used for <a href="https://kairosdb.github.io/docs/build/html/PushingData.html">ingesting data in KairosDB</a>.</p> <h3 id="sending-data-via-telnet-put-protocol">Sending data via <code class="language-plaintext highlighter-rouge notranslate">telnet put</code> protocol</h3> <p>Enable OpenTSDB receiver in VictoriaMetrics by setting <code class="language-plaintext highlighter-rouge notranslate">-opentsdbListenAddr</code> command line flag. For instance, the following command enables OpenTSDB receiver in VictoriaMetrics on TCP and UDP port <code class="language-plaintext highlighter-rouge notranslate">4242</code>:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>/path/to/victoria-metrics-prod <span class="nt">-opentsdbListenAddr</span><span class="o">=</span>:4242
</code></pre>  </div></div> <p>Send data to the given address from OpenTSDB-compatible agents.</p> <p>Example for writing data with OpenTSDB protocol to local VictoriaMetrics using <code class="language-plaintext highlighter-rouge notranslate">nc</code>:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"put foo.bar.baz </span><span class="sb">`</span><span class="nb">date</span> +%s<span class="sb">`</span><span class="s2"> 123 tag1=value1 tag2=value2"</span> | nc <span class="nt">-N</span> localhost 4242
</code></pre>  </div></div> <p>An arbitrary number of lines delimited by <code class="language-plaintext highlighter-rouge notranslate">\n</code> (aka newline char) can be sent in one go. After that the data may be read via <a href="#how-to-export-data-in-json-line-format">/api/v1/export</a> endpoint:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-G</span> <span class="s1">'http://localhost:8428/api/v1/export'</span> <span class="nt">-d</span> <span class="s1">'match=foo.bar.baz'</span>
</code></pre>  </div></div> <p>The <code class="language-plaintext highlighter-rouge notranslate">/api/v1/export</code> endpoint should return the following response:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="o">{</span><span class="s2">"metric"</span>:<span class="o">{</span><span class="s2">"__name__"</span>:<span class="s2">"foo.bar.baz"</span>,<span class="s2">"tag1"</span>:<span class="s2">"value1"</span>,<span class="s2">"tag2"</span>:<span class="s2">"value2"</span><span class="o">}</span>,<span class="s2">"values"</span>:[123],<span class="s2">"timestamps"</span>:[1560277292000]<span class="o">}</span>
</code></pre>  </div></div> <h3 id="sending-opentsdb-data-via-http-apiput-requests">Sending OpenTSDB data via HTTP <code class="language-plaintext highlighter-rouge notranslate">/api/put</code> requests</h3> <p>Enable HTTP server for OpenTSDB <code class="language-plaintext highlighter-rouge notranslate">/api/put</code> requests by setting <code class="language-plaintext highlighter-rouge notranslate">-opentsdbHTTPListenAddr</code> command line flag. For instance, the following command enables OpenTSDB HTTP server on port <code class="language-plaintext highlighter-rouge notranslate">4242</code>:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>/path/to/victoria-metrics-prod <span class="nt">-opentsdbHTTPListenAddr</span><span class="o">=</span>:4242
</code></pre>  </div></div> <p>Send data to the given address from OpenTSDB-compatible agents.</p> <p>Example for writing a single data point:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="nt">-d</span> <span class="s1">'{"metric":"x.y.z","value":45.34,"tags":{"t1":"v1","t2":"v2"}}'</span> http://localhost:4242/api/put
</code></pre>  </div></div> <p>Example for writing multiple data points in a single request:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="nt">-d</span> <span class="s1">'[{"metric":"foo","value":45.34},{"metric":"bar","value":43}]'</span> http://localhost:4242/api/put
</code></pre>  </div></div> <p>After that the data may be read via <a href="#how-to-export-data-in-json-line-format">/api/v1/export</a> endpoint:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-G</span> <span class="s1">'http://localhost:8428/api/v1/export'</span> <span class="nt">-d</span> <span class="s1">'match[]=x.y.z'</span> <span class="nt">-d</span> <span class="s1">'match[]=foo'</span> <span class="nt">-d</span> <span class="s1">'match[]=bar'</span>
</code></pre>  </div></div> <p>The <code class="language-plaintext highlighter-rouge notranslate">/api/v1/export</code> endpoint should return the following response:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="o">{</span><span class="s2">"metric"</span>:<span class="o">{</span><span class="s2">"__name__"</span>:<span class="s2">"foo"</span><span class="o">}</span>,<span class="s2">"values"</span>:[45.34],<span class="s2">"timestamps"</span>:[1566464846000]<span class="o">}</span>
<span class="o">{</span><span class="s2">"metric"</span>:<span class="o">{</span><span class="s2">"__name__"</span>:<span class="s2">"bar"</span><span class="o">}</span>,<span class="s2">"values"</span>:[43],<span class="s2">"timestamps"</span>:[1566464846000]<span class="o">}</span>
<span class="o">{</span><span class="s2">"metric"</span>:<span class="o">{</span><span class="s2">"__name__"</span>:<span class="s2">"x.y.z"</span>,<span class="s2">"t1"</span>:<span class="s2">"v1"</span>,<span class="s2">"t2"</span>:<span class="s2">"v2"</span><span class="o">}</span>,<span class="s2">"values"</span>:[45.34],<span class="s2">"timestamps"</span>:[1566464763000]<span class="o">}</span>
</code></pre>  </div></div> <p>Extra labels may be added to all the imported time series by passing <code class="language-plaintext highlighter-rouge notranslate">extra_label=name=value</code> query args. For example, <code class="language-plaintext highlighter-rouge notranslate">/api/put?extra_label=foo=bar</code> would add <code class="language-plaintext highlighter-rouge notranslate">{foo="bar"}</code> label to all the ingested metrics.</p> <h2 id="prometheus-querying-api-usage">Prometheus querying API usage</h2> <p>VictoriaMetrics supports the following handlers from <a href="https://prometheus.io/docs/prometheus/latest/querying/api/">Prometheus querying API</a>:</p> <ul> <li><a href="https://prometheus.io/docs/prometheus/latest/querying/api/#instant-queries">/api/v1/query</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/querying/api/#range-queries">/api/v1/query_range</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/querying/api/#finding-series-by-label-matchers">/api/v1/series</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/querying/api/#getting-label-names">/api/v1/labels</a></li> <li><a href="https://prometheus.io/docs/prometheus/latest/querying/api/#querying-label-values">/api/v1/label/…/values</a></li> <li>
<a href="https://prometheus.io/docs/prometheus/latest/querying/api/#tsdb-stats">/api/v1/status/tsdb</a>. VictoriaMetrics accepts optional <code class="language-plaintext highlighter-rouge notranslate">topN=N</code> and <code class="language-plaintext highlighter-rouge notranslate">date=YYYY-MM-DD</code> query args for this handler, where <code class="language-plaintext highlighter-rouge notranslate">N</code> is the number of top entries to return in the response and <code class="language-plaintext highlighter-rouge notranslate">YYYY-MM-DD</code> is the date for collecting the stats. By default top 10 entries are returned and the stats is collected for the current day.</li> <li>
<a href="https://prometheus.io/docs/prometheus/latest/querying/api/#targets">/api/v1/targets</a> - see <a href="#how-to-scrape-prometheus-exporters-such-as-node-exporter">these docs</a> for more details.</li> </ul> <p>These handlers can be queried from Prometheus-compatible clients such as Grafana or curl. All the Prometheus querying API handlers can be prepended with <code class="language-plaintext highlighter-rouge notranslate">/prometheus</code> prefix. For example, both <code class="language-plaintext highlighter-rouge notranslate">/prometheus/api/v1/query</code> and <code class="language-plaintext highlighter-rouge notranslate">/api/v1/query</code> should work.</p> <h3 id="prometheus-querying-api-enhancements">Prometheus querying API enhancements</h3> <p>VictoriaMetrics accepts optional <code class="language-plaintext highlighter-rouge notranslate">extra_label=&lt;label_name&gt;=&lt;label_value&gt;</code> query arg, which can be used for enforcing additional label filters for queries. For example, <code class="language-plaintext highlighter-rouge notranslate">/api/v1/query_range?extra_label=user_id=123&amp;query=&lt;query&gt;</code> would automatically add <code class="language-plaintext highlighter-rouge notranslate">{user_id="123"}</code> label filter to the given <code class="language-plaintext highlighter-rouge notranslate">&lt;query&gt;</code>. This functionality can be used for limiting the scope of time series visible to the given tenant. It is expected that the <code class="language-plaintext highlighter-rouge notranslate">extra_label</code> query arg is automatically set by auth proxy sitting in front of VictoriaMetrics. <a href="mailto:sales@victoriametrics.com">Contact us</a> if you need assistance with such a proxy.</p> <p>VictoriaMetrics accepts relative times in <code class="language-plaintext highlighter-rouge notranslate">time</code>, <code class="language-plaintext highlighter-rouge notranslate">start</code> and <code class="language-plaintext highlighter-rouge notranslate">end</code> query args additionally to unix timestamps and <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC3339</a>. For example, the following query would return data for the last 30 minutes: <code class="language-plaintext highlighter-rouge notranslate">/api/v1/query_range?start=-30m&amp;query=...</code>.</p> <p>By default, VictoriaMetrics returns time series for the last 5 minutes from <code class="language-plaintext highlighter-rouge notranslate">/api/v1/series</code>, while the Prometheus API defaults to all time. Use <code class="language-plaintext highlighter-rouge notranslate">start</code> and <code class="language-plaintext highlighter-rouge notranslate">end</code> to select a different time range.</p> <p>VictoriaMetrics accepts additional args for <code class="language-plaintext highlighter-rouge notranslate">/api/v1/labels</code> and <code class="language-plaintext highlighter-rouge notranslate">/api/v1/label/.../values</code> handlers. See <a href="https://github.com/prometheus/prometheus/issues/6178">this feature request</a> for details:</p> <ul> <li>Any number <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#time-series-selectors">time series selectors</a> via <code class="language-plaintext highlighter-rouge notranslate">match[]</code> query arg.</li> <li>Optional <code class="language-plaintext highlighter-rouge notranslate">start</code> and <code class="language-plaintext highlighter-rouge notranslate">end</code> query args for limiting the time range for the selected labels or label values.</li> </ul> <p>Additionally VictoriaMetrics provides the following handlers:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/series/count</code> - returns the total number of time series in the database. Some notes: <ul> <li>the handler scans all the inverted index, so it can be slow if the database contains tens of millions of time series;</li> <li>the handler may count <a href="#how-to-delete-time-series">deleted time series</a> additionally to normal time series due to internal implementation restrictions;</li> </ul> </li> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/labels/count</code> - returns a list of <code class="language-plaintext highlighter-rouge notranslate">label: values_count</code> entries. It can be used for determining labels with the maximum number of values.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/status/active_queries</code> - returns a list of currently running queries.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/status/top_queries</code> - returns the following query lists: <ul> <li>the most frequently executed queries - <code class="language-plaintext highlighter-rouge notranslate">topByCount</code>
</li> <li>queries with the biggest average execution duration - <code class="language-plaintext highlighter-rouge notranslate">topByAvgDuration</code>
</li> <li>queries that took the most time for execution - <code class="language-plaintext highlighter-rouge notranslate">topBySumDuration</code>
</li> </ul> <p>The number of returned queries can be limited via <code class="language-plaintext highlighter-rouge notranslate">topN</code> query arg. Old queries can be filtered out with <code class="language-plaintext highlighter-rouge notranslate">maxLifetime</code> query arg. For example, request to <code class="language-plaintext highlighter-rouge notranslate">/api/v1/status/top_queries?topN=5&amp;maxLifetime=30s</code> would return up to 5 queries per list, which were executed during the last 30 seconds. VictoriaMetrics tracks the last <code class="language-plaintext highlighter-rouge notranslate">-search.queryStats.lastQueriesCount</code> queries with durations at least <code class="language-plaintext highlighter-rouge notranslate">-search.queryStats.minQueryDuration</code>.</p> </li> </ul> <h2 id="graphite-api-usage">Graphite API usage</h2> <p>VictoriaMetrics supports the following Graphite APIs, which are needed for <a href="https://grafana.com/docs/grafana/latest/datasources/graphite/">Graphite datasource in Grafana</a>:</p> <ul> <li>Render API - see <a href="#graphite-render-api-usage">these docs</a>.</li> <li>Metrics API - see <a href="#graphite-metrics-api-usage">these docs</a>.</li> <li>Tags API - see <a href="#graphite-tags-api-usage">these docs</a>.</li> </ul> <p>All the Graphite handlers can be pre-pended with <code class="language-plaintext highlighter-rouge notranslate">/graphite</code> prefix. For example, both <code class="language-plaintext highlighter-rouge notranslate">/graphite/metrics/find</code> and <code class="language-plaintext highlighter-rouge notranslate">/metrics/find</code> should work.</p> <p>VictoriaMetrics supports <code class="language-plaintext highlighter-rouge notranslate">__graphite__</code> pseudo-label for filtering time series with Graphite-compatible filters in <a href="https://victoriametrics.github.io/MetricsQL.html">MetricsQL</a>. For example, <code class="language-plaintext highlighter-rouge notranslate">{__graphite__="foo.*.bar"}</code> is equivalent to <code class="language-plaintext highlighter-rouge notranslate">{__name__=~"foo[.][^.]*[.]bar"}</code>, but it works faster and it is easier to use when migrating from Graphite to VictoriaMetrics.</p> <h3 id="graphite-render-api-usage">Graphite Render API usage</h3> <p><a href="https://victoriametrics.com/enterprise.html">VictoriaMetrics Enterprise</a> supports <a href="https://graphite.readthedocs.io/en/stable/render_api.html">Graphite Render API</a> subset at <code class="language-plaintext highlighter-rouge notranslate">/render</code> endpoint, which is used by <a href="https://grafana.com/docs/grafana/latest/datasources/graphite/">Graphite datasource in Grafana</a>. It supports <code class="language-plaintext highlighter-rouge notranslate">Storage-Step</code> http request header, which must be set to a step between data points stored in VictoriaMetrics when configuring Graphite datasource in Grafana.</p> <h3 id="graphite-metrics-api-usage">Graphite Metrics API usage</h3> <p>VictoriaMetrics supports the following handlers from <a href="https://graphite-api.readthedocs.io/en/latest/api.html#the-metrics-api">Graphite Metrics API</a>:</p> <ul> <li><a href="https://graphite-api.readthedocs.io/en/latest/api.html#metrics-find">/metrics/find</a></li> <li><a href="https://graphite-api.readthedocs.io/en/latest/api.html#metrics-expand">/metrics/expand</a></li> <li><a href="https://graphite-api.readthedocs.io/en/latest/api.html#metrics-index-json">/metrics/index.json</a></li> </ul> <p>VictoriaMetrics accepts the following additional query args at <code class="language-plaintext highlighter-rouge notranslate">/metrics/find</code> and <code class="language-plaintext highlighter-rouge notranslate">/metrics/expand</code>:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">label</code> - for selecting arbitrary label values. By default <code class="language-plaintext highlighter-rouge notranslate">label=__name__</code>, i.e. metric names are selected.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">delimiter</code> - for using different delimiters in metric name hierachy. For example, <code class="language-plaintext highlighter-rouge notranslate">/metrics/find?delimiter=_&amp;query=node_*</code> would return all the metric name prefixes that start with <code class="language-plaintext highlighter-rouge notranslate">node_</code>. By default <code class="language-plaintext highlighter-rouge notranslate">delimiter=.</code>.</li> </ul> <h3 id="graphite-tags-api-usage">Graphite Tags API usage</h3> <p>VictoriaMetrics supports the following handlers from <a href="https://graphite.readthedocs.io/en/stable/tags.html">Graphite Tags API</a>:</p> <ul> <li><a href="https://graphite.readthedocs.io/en/stable/tags.html#adding-series-to-the-tagdb">/tags/tagSeries</a></li> <li><a href="https://graphite.readthedocs.io/en/stable/tags.html#adding-series-to-the-tagdb">/tags/tagMultiSeries</a></li> <li><a href="https://graphite.readthedocs.io/en/stable/tags.html#exploring-tags">/tags</a></li> <li><a href="https://graphite.readthedocs.io/en/stable/tags.html#exploring-tags">/tags/{tag_name}</a></li> <li><a href="https://graphite.readthedocs.io/en/stable/tags.html#exploring-tags">/tags/findSeries</a></li> <li><a href="https://graphite.readthedocs.io/en/stable/tags.html#auto-complete-support">/tags/autoComplete/tags</a></li> <li><a href="https://graphite.readthedocs.io/en/stable/tags.html#auto-complete-support">/tags/autoComplete/values</a></li> <li><a href="https://graphite.readthedocs.io/en/stable/tags.html#removing-series-from-the-tagdb">/tags/delSeries</a></li> </ul> <h2 id="how-to-build-from-sources">How to build from sources</h2> <p>We recommend using either <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases">binary releases</a> or <a href="https://hub.docker.com/r/victoriametrics/victoria-metrics/">docker images</a> instead of building VictoriaMetrics from sources. Building from sources is reasonable when developing additional features specific to your needs or when testing bugfixes.</p> <h3 id="development-build">Development build</h3> <ol> <li>
<a href="https://golang.org/doc/install">Install Go</a>. The minimum supported version is Go 1.13.</li> <li>Run <code class="language-plaintext highlighter-rouge notranslate">make victoria-metrics</code> from the root folder of the repository. It builds <code class="language-plaintext highlighter-rouge notranslate">victoria-metrics</code> binary and puts it into the <code class="language-plaintext highlighter-rouge notranslate">bin</code> folder.</li> </ol> <h3 id="production-build">Production build</h3> <ol> <li>
<a href="https://docs.docker.com/install/">Install docker</a>.</li> <li>Run <code class="language-plaintext highlighter-rouge notranslate">make victoria-metrics-prod</code> from the root folder of the repository. It builds <code class="language-plaintext highlighter-rouge notranslate">victoria-metrics-prod</code> binary and puts it into the <code class="language-plaintext highlighter-rouge notranslate">bin</code> folder.</li> </ol> <h3 id="arm-build">ARM build</h3> <p>ARM build may run on Raspberry Pi or on <a href="https://blog.cloudflare.com/arm-takes-wing/">energy-efficient ARM servers</a>.</p> <h3 id="development-arm-build">Development ARM build</h3> <ol> <li>
<a href="https://golang.org/doc/install">Install Go</a>. The minimum supported version is Go 1.13.</li> <li>Run <code class="language-plaintext highlighter-rouge notranslate">make victoria-metrics-arm</code> or <code class="language-plaintext highlighter-rouge notranslate">make victoria-metrics-arm64</code> from the root folder of the repository. It builds <code class="language-plaintext highlighter-rouge notranslate">victoria-metrics-arm</code> or <code class="language-plaintext highlighter-rouge notranslate">victoria-metrics-arm64</code> binary respectively and puts it into the <code class="language-plaintext highlighter-rouge notranslate">bin</code> folder.</li> </ol> <h3 id="production-arm-build">Production ARM build</h3> <ol> <li>
<a href="https://docs.docker.com/install/">Install docker</a>.</li> <li>Run <code class="language-plaintext highlighter-rouge notranslate">make victoria-metrics-arm-prod</code> or <code class="language-plaintext highlighter-rouge notranslate">make victoria-metrics-arm64-prod</code> from the root folder of the repository. It builds <code class="language-plaintext highlighter-rouge notranslate">victoria-metrics-arm-prod</code> or <code class="language-plaintext highlighter-rouge notranslate">victoria-metrics-arm64-prod</code> binary respectively and puts it into the <code class="language-plaintext highlighter-rouge notranslate">bin</code> folder.</li> </ol> <h3 id="pure-go-build-cgo_enabled0">Pure Go build (CGO_ENABLED=0)</h3> <p><code class="language-plaintext highlighter-rouge notranslate">Pure Go</code> mode builds only Go code without <a href="https://golang.org/cmd/cgo/">cgo</a> dependencies. This is an experimental mode, which may result in a lower compression ratio and slower decompression performance. Use it with caution!</p> <ol> <li>
<a href="https://golang.org/doc/install">Install Go</a>. The minimum supported version is Go 1.13.</li> <li>Run <code class="language-plaintext highlighter-rouge notranslate">make victoria-metrics-pure</code> from the root folder of the repository. It builds <code class="language-plaintext highlighter-rouge notranslate">victoria-metrics-pure</code> binary and puts it into the <code class="language-plaintext highlighter-rouge notranslate">bin</code> folder.</li> </ol> <h3 id="building-docker-images">Building docker images</h3> <p>Run <code class="language-plaintext highlighter-rouge notranslate">make package-victoria-metrics</code>. It builds <code class="language-plaintext highlighter-rouge notranslate">victoriametrics/victoria-metrics:&lt;PKG_TAG&gt;</code> docker image locally. <code class="language-plaintext highlighter-rouge notranslate">&lt;PKG_TAG&gt;</code> is auto-generated image tag, which depends on source code in the repository. The <code class="language-plaintext highlighter-rouge notranslate">&lt;PKG_TAG&gt;</code> may be manually set via <code class="language-plaintext highlighter-rouge notranslate">PKG_TAG=foobar make package-victoria-metrics</code>.</p> <p>The base docker image is <a href="https://hub.docker.com/_/alpine">alpine</a> but it is possible to use any other base image by setting it via <code class="language-plaintext highlighter-rouge notranslate">&lt;ROOT_IMAGE&gt;</code> environment variable. For example, the following command builds the image on top of <a href="https://hub.docker.com/_/scratch">scratch</a> image:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="nv">ROOT_IMAGE</span><span class="o">=</span>scratch make package-victoria-metrics
</code></pre>  </div></div> <h2 id="start-with-docker-compose">Start with docker-compose</h2> <p><a href="https://github.com/VictoriaMetrics/VictoriaMetrics/blob/master/deployment/docker/docker-compose.yml">Docker-compose</a> helps to spin up VictoriaMetrics, <a href="https://victoriametrics.github.io/vmagent.html">vmagent</a> and Grafana with one command. More details may be found <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/tree/master/deployment/docker#folder-contains-basic-images-and-tools-for-building-and-running-victoria-metrics-in-docker">here</a>.</p> <h2 id="setting-up-service">Setting up service</h2> <p>Read <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues/43">these instructions</a> on how to set up VictoriaMetrics as a service in your OS. There is also <a href="https://snapcraft.io/victoriametrics">snap package for Ubuntu</a>.</p> <h2 id="how-to-work-with-snapshots">How to work with snapshots</h2> <p>VictoriaMetrics can create <a href="https://medium.com/@valyala/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282">instant snapshots</a> for all the data stored under <code class="language-plaintext highlighter-rouge notranslate">-storageDataPath</code> directory. Navigate to <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoriametrics-addr&gt;:8428/snapshot/create</code> in order to create an instant snapshot. The page will return the following JSON response:</p> <div class="language-json highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="p">{</span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"ok"</span><span class="p">,</span><span class="nl">"snapshot"</span><span class="p">:</span><span class="s2">"&lt;snapshot-name&gt;"</span><span class="p">}</span><span class="w">
</span></code></pre>  </div></div> <p>Snapshots are created under <code class="language-plaintext highlighter-rouge notranslate">&lt;-storageDataPath&gt;/snapshots</code> directory, where <code class="language-plaintext highlighter-rouge notranslate">&lt;-storageDataPath&gt;</code> is the command-line flag value. Snapshots can be archived to backup storage at any time with <a href="https://victoriametrics.github.io/vmbackup.html">vmbackup</a>.</p> <p>The <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoriametrics-addr&gt;:8428/snapshot/list</code> page contains the list of available snapshots.</p> <p>Navigate to <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoriametrics-addr&gt;:8428/snapshot/delete?snapshot=&lt;snapshot-name&gt;</code> in order to delete <code class="language-plaintext highlighter-rouge notranslate">&lt;snapshot-name&gt;</code> snapshot.</p> <p>Navigate to <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoriametrics-addr&gt;:8428/snapshot/delete_all</code> in order to delete all the snapshots.</p> <p>Steps for restoring from a snapshot:</p> <ol> <li>Stop VictoriaMetrics with <code class="language-plaintext highlighter-rouge notranslate">kill -INT</code>.</li> <li>Restore snapshot contents from backup with <a href="https://victoriametrics.github.io/vmrestore.html">vmrestore</a> to the directory pointed by <code class="language-plaintext highlighter-rouge notranslate">-storageDataPath</code>.</li> <li>Start VictoriaMetrics.</li> </ol> <h2 id="how-to-delete-time-series">How to delete time series</h2> <p>Send a request to <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoriametrics-addr&gt;:8428/api/v1/admin/tsdb/delete_series?match[]=&lt;timeseries_selector_for_delete&gt;</code>, where <code class="language-plaintext highlighter-rouge notranslate">&lt;timeseries_selector_for_delete&gt;</code> may contain any <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#time-series-selectors">time series selector</a> for metrics to delete. After that all the time series matching the given selector are deleted. Storage space for the deleted time series isn't freed instantly - it is freed during subsequent <a href="https://medium.com/@valyala/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282">background merges of data files</a>. Note that background merges may never occur for data from previous months, so storage space won't be freed for historical data. In this case <a href="#forced-merge">forced merge</a> may help freeing up storage space.</p> <p>It is recommended verifying which metrics will be deleted with the call to <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoria-metrics-addr&gt;:8428/api/v1/series?match[]=&lt;timeseries_selector_for_delete&gt;</code> before actually deleting the metrics. By default this query will only scan active series in the past 5 minutes, so you may need to adjust <code class="language-plaintext highlighter-rouge notranslate">start</code> and <code class="language-plaintext highlighter-rouge notranslate">end</code> to a suitable range to achieve match hits.</p> <p>The <code class="language-plaintext highlighter-rouge notranslate">/api/v1/admin/tsdb/delete_series</code> handler may be protected with <code class="language-plaintext highlighter-rouge notranslate">authKey</code> if <code class="language-plaintext highlighter-rouge notranslate">-deleteAuthKey</code> command-line flag is set.</p> <p>The delete API is intended mainly for the following cases:</p> <ul> <li>One-off deleting of accidentally written invalid (or undesired) time series.</li> <li>One-off deleting of user data due to <a href="https://en.wikipedia.org/wiki/General_Data_Protection_Regulation">GDPR</a>.</li> </ul> <p>It isn't recommended using delete API for the following cases, since it brings non-zero overhead:</p> <ul> <li>Regular cleanups for unneeded data. Just prevent writing unneeded data into VictoriaMetrics. This can be done with <a href="#relabeling">relabeling</a>. See <a href="https://www.robustperception.io/relabelling-can-discard-targets-timeseries-and-alerts">this article</a> for details.</li> <li>Reducing disk space usage by deleting unneeded time series. This doesn't work as expected, since the deleted time series occupy disk space until the next merge operation, which can never occur when deleting too old data. <a href="#forced-merge">Forced merge</a> may be used for freeing up disk space occupied by old data.</li> </ul> <p>It is better using <code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod</code> command-line flag for efficient pruning of old data.</p> <h2 id="forced-merge">Forced merge</h2> <p>VictoriaMetrics performs <a href="https://medium.com/@valyala/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282">data compactions in background</a> in order to keep good performance characteristics when accepting new data. These compactions (merges) are performed independently on per-month partitions. This means that compactions are stopped for per-month partitions if no new data is ingested into these partitions. Sometimes it is necessary to trigger compactions for old partitions. For instance, in order to free up disk space occupied by <a href="#how-to-delete-time-series">deleted time series</a>. In this case forced compaction may be initiated on the specified per-month partition by sending request to <code class="language-plaintext highlighter-rouge notranslate">/internal/force_merge?partition_prefix=YYYY_MM</code>, where <code class="language-plaintext highlighter-rouge notranslate">YYYY_MM</code> is per-month partition name. For example, <code class="language-plaintext highlighter-rouge notranslate">http://victoriametrics:8428/internal/force_merge?partition_prefix=2020_08</code> would initiate forced merge for August 2020 partition. The call to <code class="language-plaintext highlighter-rouge notranslate">/internal/force_merge</code> returns immediately, while the corresponding forced merge continues running in background.</p> <p>Forced merges may require additional CPU, disk IO and storage space resources. It is unnecessary to run forced merge under normal conditions, since VictoriaMetrics automatically performs <a href="https://medium.com/@valyala/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282">optimal merges in background</a> when new data is ingested into it.</p> <h2 id="how-to-export-time-series">How to export time series</h2> <p>VictoriaMetrics provides the following handlers for exporting data:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/export/native</code> for exporting data in native binary format. This is the most efficient format for data export. See <a href="#how-to-export-data-in-native-format">these docs</a> for details.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/export</code> for exporing data in JSON line format. See <a href="#how-to-export-data-in-json-line-format">these docs</a> for details.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/export/csv</code> for exporting data in CSV. See <a href="#how-to-export-csv-data">these docs</a> for details.</li> </ul> <h3 id="how-to-export-data-in-native-format">How to export data in native format</h3> <p>Send a request to <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoriametrics-addr&gt;:8428/api/v1/export/native?match[]=&lt;timeseries_selector_for_export&gt;</code>, where <code class="language-plaintext highlighter-rouge notranslate">&lt;timeseries_selector_for_export&gt;</code> may contain any <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#time-series-selectors">time series selector</a> for metrics to export. Use <code class="language-plaintext highlighter-rouge notranslate">{__name__=~".*"}</code> selector for fetching all the time series.</p> <p>On large databases you may experience problems with limit on unique timeseries (default value is 300000). In this case you need to adjust <code class="language-plaintext highlighter-rouge notranslate">-search.maxUniqueTimeseries</code> parameter:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="c"># count unique timeseries in database</span>
wget <span class="nt">-O-</span> <span class="nt">-q</span> <span class="s1">'http://your_victoriametrics_instance:8428/api/v1/series/count'</span> | jq <span class="s1">'.data[0]'</span>

<span class="c"># relaunch victoriametrics with search.maxUniqueTimeseries more than value from previous command</span>
</code></pre>  </div></div> <p>Optional <code class="language-plaintext highlighter-rouge notranslate">start</code> and <code class="language-plaintext highlighter-rouge notranslate">end</code> args may be added to the request in order to limit the time frame for the exported data. These args may contain either unix timestamp in seconds or <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC3339</a> values.</p> <p>The exported data can be imported to VictoriaMetrics via <a href="#how-to-import-data-in-native-format">/api/v1/import/native</a>.</p> <h3 id="how-to-export-data-in-json-line-format">How to export data in JSON line format</h3> <p>Send a request to <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoriametrics-addr&gt;:8428/api/v1/export?match[]=&lt;timeseries_selector_for_export&gt;</code>, where <code class="language-plaintext highlighter-rouge notranslate">&lt;timeseries_selector_for_export&gt;</code> may contain any <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#time-series-selectors">time series selector</a> for metrics to export. Use <code class="language-plaintext highlighter-rouge notranslate">{__name__!=""}</code> selector for fetching all the time series. The response would contain all the data for the selected time series in <a href="https://en.wikipedia.org/wiki/JSON_streaming#Line-delimited_JSON">JSON streaming format</a>. Each JSON line contains samples for a single time series. An example output:</p>
<pre><code class="language-jsonl">{"metric":{"__name__":"up","job":"node_exporter","instance":"localhost:9100"},"values":[0,0,0],"timestamps":[1549891472010,1549891487724,1549891503438]}
{"metric":{"__name__":"up","job":"prometheus","instance":"localhost:9090"},"values":[1,1,1],"timestamps":[1549891461511,1549891476511,1549891491511]}
</code></pre>  <p>Optional <code class="language-plaintext highlighter-rouge notranslate">start</code> and <code class="language-plaintext highlighter-rouge notranslate">end</code> args may be added to the request in order to limit the time frame for the exported data. These args may contain either unix timestamp in seconds or <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC3339</a> values.</p> <p>Optional <code class="language-plaintext highlighter-rouge notranslate">max_rows_per_line</code> arg may be added to the request for limiting the maximum number of rows exported per each JSON line. Optional <code class="language-plaintext highlighter-rouge notranslate">reduce_mem_usage=1</code> arg may be added to the request for reducing memory usage when exporting big number of time series. In this case the output may contain multiple lines with distinct samples for the same time series.</p> <p>Pass <code class="language-plaintext highlighter-rouge notranslate">Accept-Encoding: gzip</code> HTTP header in the request to <code class="language-plaintext highlighter-rouge notranslate">/api/v1/export</code> in order to reduce network bandwidth during exporing big amounts of time series data. This enables gzip compression for the exported data. Example for exporting gzipped data:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-H</span> <span class="s1">'Accept-Encoding: gzip'</span> http://localhost:8428/api/v1/export <span class="nt">-d</span> <span class="s1">'match[]={__name__!=""}'</span> <span class="o">&gt;</span> data.jsonl.gz
</code></pre>  </div></div> <p>The maximum duration for each request to <code class="language-plaintext highlighter-rouge notranslate">/api/v1/export</code> is limited by <code class="language-plaintext highlighter-rouge notranslate">-search.maxExportDuration</code> command-line flag.</p> <p>Exported data can be imported via POST'ing it to <a href="#how-to-import-data-in-json-line-format">/api/v1/import</a>.</p> <h3 id="how-to-export-csv-data">How to export CSV data</h3> <p>Send a request to <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoriametrics-addr&gt;:8428/api/v1/export/csv?format=&lt;format&gt;&amp;match=&lt;timeseries_selector_for_export&gt;</code>, where:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">&lt;format&gt;</code> must contain comma-delimited label names for the exported CSV. The following special label names are supported: <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">__name__</code> - metric name</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">__value__</code> - sample value</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">__timestamp__:&lt;ts_format&gt;</code> - sample timestamp. <code class="language-plaintext highlighter-rouge notranslate">&lt;ts_format&gt;</code> can have the following values: <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">unix_s</code> - unix seconds</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">unix_ms</code> - unix milliseconds</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">unix_ns</code> - unix nanoseconds</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">rfc3339</code> - <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC3339</a> time</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">custom:&lt;layout&gt;</code> - custom layout for time that is supported by <a href="https://golang.org/pkg/time/#Time.Format">time.Format</a> function from Go.</li> </ul> </li> </ul> </li> <li>
<code class="language-plaintext highlighter-rouge notranslate">&lt;timeseries_selector_for_export&gt;</code> may contain any <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#time-series-selectors">time series selector</a> for metrics to export.</li> </ul> <p>Optional <code class="language-plaintext highlighter-rouge notranslate">start</code> and <code class="language-plaintext highlighter-rouge notranslate">end</code> args may be added to the request in order to limit the time frame for the exported data. These args may contain either unix timestamp in seconds or <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC3339</a> values.</p> <p>The exported CSV data can be imported to VictoriaMetrics via <a href="#how-to-import-csv-data">/api/v1/import/csv</a>.</p> <h2 id="how-to-import-time-series-data">How to import time series data</h2> <p>Time series data can be imported via any supported ingestion protocol:</p> <ul> <li>
<a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write">Prometheus remote_write API</a>. See <a href="#prometheus-setup">these docs</a> for details.</li> <li>Influx line protocol. See <a href="#how-to-send-data-from-influxdb-compatible-agents-such-as-telegraf">these docs</a> for details.</li> <li>Graphite plaintext protocol. See <a href="#how-to-send-data-from-graphite-compatible-agents-such-as-statsd">these docs</a> for details.</li> <li>OpenTSDB telnet put protocol. See <a href="#sending-data-via-telnet-put-protocol">these docs</a> for details.</li> <li>OpenTSDB http <code class="language-plaintext highlighter-rouge notranslate">/api/put</code> protocol. See <a href="#sending-opentsdb-data-via-http-apiput-requests">these docs</a> for details.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/import</code> for importing data obtained from <a href="#how-to-export-data-in-json-line-format">/api/v1/export</a>. See <a href="#how-to-import-data-in-json-line-format">these docs</a> for details.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/native</code> for importing data obtained from <a href="#how-to-export-data-in-native-format">/api/v1/export/native</a>. See <a href="#how-to-import-data-in-native-format">these docs</a> for details.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/csv</code> for importing arbitrary CSV data. See <a href="#how-to-import-csv-data">these docs</a> for details.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/prometheus</code> for importing data in Prometheus exposition format. See <a href="#how-to-import-data-in-prometheus-exposition-format">these docs</a> for details.</li> </ul> <h3 id="how-to-import-data-in-native-format">How to import data in native format</h3> <p>The specification of VictoriaMetrics' native format may yet change and is not formally documented yet. So currently we do not recommend that external clients attempt to pack their own metrics in native format file.</p> <p>If you have a native format file obtained via <a href="#how-to-export-data-in-native-format">/api/v1/export/native</a> however this is the most efficient protocol for importing data in.</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="c"># Export the data from &lt;source-victoriametrics&gt;:</span>
curl http://source-victoriametrics:8428/api/v1/export/native <span class="nt">-d</span> <span class="s1">'match={__name__!=""}'</span> <span class="o">&gt;</span> exported_data.bin

<span class="c"># Import the data to &lt;destination-victoriametrics&gt;:</span>
curl <span class="nt">-X</span> POST http://destination-victoriametrics:8428/api/v1/import/native <span class="nt">-T</span> exported_data.bin
</code></pre>  </div></div> <p>Pass <code class="language-plaintext highlighter-rouge notranslate">Content-Encoding: gzip</code> HTTP request header to <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/native</code> for importing gzipped data:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="c"># Export gzipped data from &lt;source-victoriametrics&gt;:</span>
curl <span class="nt">-H</span> <span class="s1">'Accept-Encoding: gzip'</span> http://source-victoriametrics:8428/api/v1/export/native <span class="nt">-d</span> <span class="s1">'match={__name__!=""}'</span> <span class="o">&gt;</span> exported_data.bin.gz

<span class="c"># Import gzipped data to &lt;destination-victoriametrics&gt;:</span>
curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s1">'Content-Encoding: gzip'</span> http://destination-victoriametrics:8428/api/v1/import/native <span class="nt">-T</span> exported_data.bin.gz
</code></pre>  </div></div> <p>Extra labels may be added to all the imported time series by passing <code class="language-plaintext highlighter-rouge notranslate">extra_label=name=value</code> query args. For example, <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/native?extra_label=foo=bar</code> would add <code class="language-plaintext highlighter-rouge notranslate">"foo":"bar"</code> label to all the imported time series.</p> <p>Note that it could be required to flush response cache after importing historical data. See <a href="#backfilling">these docs</a> for detail.</p> <h3 id="how-to-import-data-in-json-line-format">How to import data in JSON line format</h3> <p>Example for importing data obtained via <a href="#how-to-export-data-in-json-line-format">/api/v1/export</a>:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="c"># Export the data from &lt;source-victoriametrics&gt;:</span>
curl http://source-victoriametrics:8428/api/v1/export <span class="nt">-d</span> <span class="s1">'match={__name__!=""}'</span> <span class="o">&gt;</span> exported_data.jsonl

<span class="c"># Import the data to &lt;destination-victoriametrics&gt;:</span>
curl <span class="nt">-X</span> POST http://destination-victoriametrics:8428/api/v1/import <span class="nt">-T</span> exported_data.jsonl
</code></pre>  </div></div> <p>Pass <code class="language-plaintext highlighter-rouge notranslate">Content-Encoding: gzip</code> HTTP request header to <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import</code> for importing gzipped data:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="c"># Export gzipped data from &lt;source-victoriametrics&gt;:</span>
curl <span class="nt">-H</span> <span class="s1">'Accept-Encoding: gzip'</span> http://source-victoriametrics:8428/api/v1/export <span class="nt">-d</span> <span class="s1">'match={__name__!=""}'</span> <span class="o">&gt;</span> exported_data.jsonl.gz

<span class="c"># Import gzipped data to &lt;destination-victoriametrics&gt;:</span>
curl <span class="nt">-X</span> POST <span class="nt">-H</span> <span class="s1">'Content-Encoding: gzip'</span> http://destination-victoriametrics:8428/api/v1/import <span class="nt">-T</span> exported_data.jsonl.gz
</code></pre>  </div></div> <p>Extra labels may be added to all the imported time series by passing <code class="language-plaintext highlighter-rouge notranslate">extra_label=name=value</code> query args. For example, <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import?extra_label=foo=bar</code> would add <code class="language-plaintext highlighter-rouge notranslate">"foo":"bar"</code> label to all the imported time series.</p> <p>Note that it could be required to flush response cache after importing historical data. See <a href="#backfilling">these docs</a> for detail.</p> <h3 id="how-to-import-csv-data">How to import CSV data</h3> <p>Arbitrary CSV data can be imported via <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/csv</code>. The CSV data is imported according to the provided <code class="language-plaintext highlighter-rouge notranslate">format</code> query arg. The <code class="language-plaintext highlighter-rouge notranslate">format</code> query arg must contain comma-separated list of parsing rules for CSV fields. Each rule consists of three parts delimited by a colon:</p> <div class="language-plaintext highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>&lt;column_pos&gt;:&lt;type&gt;:&lt;context&gt;
</code></pre>  </div></div> <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">&lt;column_pos&gt;</code> is the position of the CSV column (field). Column numbering starts from 1. The order of parsing rules may be arbitrary.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">&lt;type&gt;</code> describes the column type. Supported types are: <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">metric</code> - the corresponding CSV column at <code class="language-plaintext highlighter-rouge notranslate">&lt;column_pos&gt;</code> contains metric value, which must be integer or floating-point number. The metric name is read from the <code class="language-plaintext highlighter-rouge notranslate">&lt;context&gt;</code>. CSV line must have at least a single metric field. Multiple metric fields per CSV line is OK.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">label</code> - the corresponding CSV column at <code class="language-plaintext highlighter-rouge notranslate">&lt;column_pos&gt;</code> contains label value. The label name is read from the <code class="language-plaintext highlighter-rouge notranslate">&lt;context&gt;</code>. CSV line may have arbitrary number of label fields. All these labels are attached to all the configured metrics.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">time</code> - the corresponding CSV column at <code class="language-plaintext highlighter-rouge notranslate">&lt;column_pos&gt;</code> contains metric time. CSV line may contain either one or zero columns with time. If CSV line has no time, then the current time is used. The time is applied to all the configured metrics. The format of the time is configured via <code class="language-plaintext highlighter-rouge notranslate">&lt;context&gt;</code>. Supported time formats are: <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">unix_s</code> - unix timestamp in seconds.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">unix_ms</code> - unix timestamp in milliseconds.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">unix_ns</code> - unix timestamp in nanoseconds. Note that VictoriaMetrics rounds the timestamp to milliseconds.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">rfc3339</code> - timestamp in <a href="https://tools.ietf.org/html/rfc3339">RFC3339</a> format, i.e. <code class="language-plaintext highlighter-rouge notranslate">2006-01-02T15:04:05Z</code>.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">custom:&lt;layout&gt;</code> - custom layout for the timestamp. The <code class="language-plaintext highlighter-rouge notranslate">&lt;layout&gt;</code> may contain arbitrary time layout according to <a href="https://golang.org/pkg/time/#Parse">time.Parse rules in Go</a>.</li> </ul> </li> </ul> </li> </ul> <p>Each request to <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/csv</code> may contain arbitrary number of CSV lines.</p> <p>Example for importing CSV data via <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/csv</code>:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-d</span> <span class="s2">"GOOG,1.23,4.56,NYSE"</span> <span class="s1">'http://localhost:8428/api/v1/import/csv?format=2:metric:ask,3:metric:bid,1:label:ticker,4:label:market'</span>
curl <span class="nt">-d</span> <span class="s2">"MSFT,3.21,1.67,NASDAQ"</span> <span class="s1">'http://localhost:8428/api/v1/import/csv?format=2:metric:ask,3:metric:bid,1:label:ticker,4:label:market'</span>
</code></pre>  </div></div> <p>After that the data may be read via <a href="#how-to-export-data-in-json-line-format">/api/v1/export</a> endpoint:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-G</span> <span class="s1">'http://localhost:8428/api/v1/export'</span> <span class="nt">-d</span> <span class="s1">'match[]={ticker!=""}'</span>
</code></pre>  </div></div> <p>The following response should be returned:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="o">{</span><span class="s2">"metric"</span>:<span class="o">{</span><span class="s2">"__name__"</span>:<span class="s2">"bid"</span>,<span class="s2">"market"</span>:<span class="s2">"NASDAQ"</span>,<span class="s2">"ticker"</span>:<span class="s2">"MSFT"</span><span class="o">}</span>,<span class="s2">"values"</span>:[1.67],<span class="s2">"timestamps"</span>:[1583865146520]<span class="o">}</span>
<span class="o">{</span><span class="s2">"metric"</span>:<span class="o">{</span><span class="s2">"__name__"</span>:<span class="s2">"bid"</span>,<span class="s2">"market"</span>:<span class="s2">"NYSE"</span>,<span class="s2">"ticker"</span>:<span class="s2">"GOOG"</span><span class="o">}</span>,<span class="s2">"values"</span>:[4.56],<span class="s2">"timestamps"</span>:[1583865146495]<span class="o">}</span>
<span class="o">{</span><span class="s2">"metric"</span>:<span class="o">{</span><span class="s2">"__name__"</span>:<span class="s2">"ask"</span>,<span class="s2">"market"</span>:<span class="s2">"NASDAQ"</span>,<span class="s2">"ticker"</span>:<span class="s2">"MSFT"</span><span class="o">}</span>,<span class="s2">"values"</span>:[3.21],<span class="s2">"timestamps"</span>:[1583865146520]<span class="o">}</span>
<span class="o">{</span><span class="s2">"metric"</span>:<span class="o">{</span><span class="s2">"__name__"</span>:<span class="s2">"ask"</span>,<span class="s2">"market"</span>:<span class="s2">"NYSE"</span>,<span class="s2">"ticker"</span>:<span class="s2">"GOOG"</span><span class="o">}</span>,<span class="s2">"values"</span>:[1.23],<span class="s2">"timestamps"</span>:[1583865146495]<span class="o">}</span>
</code></pre>  </div></div> <p>Extra labels may be added to all the imported lines by passing <code class="language-plaintext highlighter-rouge notranslate">extra_label=name=value</code> query args. For example, <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/csv?extra_label=foo=bar</code> would add <code class="language-plaintext highlighter-rouge notranslate">"foo":"bar"</code> label to all the imported lines.</p> <p>Note that it could be required to flush response cache after importing historical data. See <a href="#backfilling">these docs</a> for detail.</p> <h3 id="how-to-import-data-in-prometheus-exposition-format">How to import data in Prometheus exposition format</h3> <p>VictoriaMetrics accepts data in <a href="https://github.com/prometheus/docs/blob/master/content/docs/instrumenting/exposition_formats.md#text-based-format">Prometheus exposition format</a> and in <a href="https://github.com/OpenObservability/OpenMetrics/blob/master/specification/OpenMetrics.md">OpenMetrics format</a> via <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/prometheus</code> path. For example, the following line imports a single line in Prometheus exposition format into VictoriaMetrics:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-d</span> <span class="s1">'foo{bar="baz"} 123'</span> <span class="nt">-X</span> POST <span class="s1">'http://localhost:8428/api/v1/import/prometheus'</span>
</code></pre>  </div></div> <p>The following command may be used for verifying the imported data:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-G</span> <span class="s1">'http://localhost:8428/api/v1/export'</span> <span class="nt">-d</span> <span class="s1">'match={__name__=~"foo"}'</span>
</code></pre>  </div></div> <p>It should return something like the following:</p> <div class="language-plaintext highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>{"metric":{"__name__":"foo","bar":"baz"},"values":[123],"timestamps":[1594370496905]}
</code></pre>  </div></div> <p>Extra labels may be added to all the imported metrics by passing <code class="language-plaintext highlighter-rouge notranslate">extra_label=name=value</code> query args. For example, <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/prometheus?extra_label=foo=bar</code> would add <code class="language-plaintext highlighter-rouge notranslate">{foo="bar"}</code> label to all the imported metrics.</p> <p>If timestamp is missing in <code class="language-plaintext highlighter-rouge notranslate">&lt;metric&gt; &lt;value&gt; &lt;timestamp&gt;</code> Prometheus exposition format line, then the current timestamp is used during data ingestion. It can be overriden by passing unix timestamp in <em>milliseconds</em> via <code class="language-plaintext highlighter-rouge notranslate">timestamp</code> query arg. For example, <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/prometheus?timestamp=1594370496905</code>.</p> <p>VictoriaMetrics accepts arbitrary number of lines in a single request to <code class="language-plaintext highlighter-rouge notranslate">/api/v1/import/prometheus</code>, i.e. it supports data streaming.</p> <p>Note that it could be required to flush response cache after importing historical data. See <a href="#backfilling">these docs</a> for detail.</p> <p>VictoriaMetrics also may scrape Prometheus targets - see <a href="#how-to-scrape-prometheus-exporters-such-as-node-exporter">these docs</a>.</p> <h2 id="relabeling">Relabeling</h2> <p>VictoriaMetrics supports Prometheus-compatible relabeling for all the ingested metrics if <code class="language-plaintext highlighter-rouge notranslate">-relabelConfig</code> command-line flag points to a file containing a list of <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config">relabel_config</a> entries. See <a href="https://valyala.medium.com/how-to-use-relabeling-in-prometheus-and-victoriametrics-8b90fc22c4b2">this article with relabeling tips and tricks</a>.</p> <p>Example contents for <code class="language-plaintext highlighter-rouge notranslate">-relabelConfig</code> file:</p> <div class="language-yml highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="c1"># Add {cluster="dev"} label.</span>
<span class="pi">-</span> <span class="na">target_label</span><span class="pi">:</span> <span class="s">cluster</span>
  <span class="na">replacement</span><span class="pi">:</span> <span class="s">dev</span>

<span class="c1"># Drop the metric (or scrape target) with `{__meta_kubernetes_pod_container_init="true"}` label.</span>
<span class="pi">-</span> <span class="na">action</span><span class="pi">:</span> <span class="s">drop</span>
  <span class="na">source_labels</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">__meta_kubernetes_pod_container_init</span><span class="pi">]</span>
  <span class="na">regex</span><span class="pi">:</span> <span class="no">true</span>
</code></pre>  </div></div> <p>VictoriaMetrics provides the following extra actions for relabeling rules:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">replace_all</code>: replaces all the occurences of <code class="language-plaintext highlighter-rouge notranslate">regex</code> in the values of <code class="language-plaintext highlighter-rouge notranslate">source_labels</code> with the <code class="language-plaintext highlighter-rouge notranslate">replacement</code> and stores the result in the <code class="language-plaintext highlighter-rouge notranslate">target_label</code>.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">labelmap_all</code>: replaces all the occurences of <code class="language-plaintext highlighter-rouge notranslate">regex</code> in all the label names with the <code class="language-plaintext highlighter-rouge notranslate">replacement</code>.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">keep_if_equal</code>: keeps the entry if all label values from <code class="language-plaintext highlighter-rouge notranslate">source_labels</code> are equal.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">drop_if_equal</code>: drops the entry if all the label values from <code class="language-plaintext highlighter-rouge notranslate">source_labels</code> are equal.</li> </ul> <p>See also <a href="https://victoriametrics.github.io/vmagent.html#relabeling">relabeling in vmagent</a>.</p> <h2 id="federation">Federation</h2> <p>VictoriaMetrics exports <a href="https://prometheus.io/docs/prometheus/latest/federation/">Prometheus-compatible federation data</a> at <code class="language-plaintext highlighter-rouge notranslate">http://&lt;victoriametrics-addr&gt;:8428/federate?match[]=&lt;timeseries_selector_for_federation&gt;</code>.</p> <p>Optional <code class="language-plaintext highlighter-rouge notranslate">start</code> and <code class="language-plaintext highlighter-rouge notranslate">end</code> args may be added to the request in order to scrape the last point for each selected time series on the <code class="language-plaintext highlighter-rouge notranslate">[start ... end]</code> interval. <code class="language-plaintext highlighter-rouge notranslate">start</code> and <code class="language-plaintext highlighter-rouge notranslate">end</code> may contain either unix timestamp in seconds or <a href="https://www.ietf.org/rfc/rfc3339.txt">RFC3339</a> values. By default, the last point on the interval <code class="language-plaintext highlighter-rouge notranslate">[now - max_lookback ... now]</code> is scraped for each time series. The default value for <code class="language-plaintext highlighter-rouge notranslate">max_lookback</code> is <code class="language-plaintext highlighter-rouge notranslate">5m</code> (5 minutes), but it can be overridden. For instance, <code class="language-plaintext highlighter-rouge notranslate">/federate?match[]=up&amp;max_lookback=1h</code> would return last points on the <code class="language-plaintext highlighter-rouge notranslate">[now - 1h ... now]</code> interval. This may be useful for time series federation with scrape intervals exceeding <code class="language-plaintext highlighter-rouge notranslate">5m</code>.</p> <h2 id="capacity-planning">Capacity planning</h2> <p>A rough estimation of the required resources for ingestion path:</p> <ul> <li> <p>RAM size: less than 1KB per active time series. So, ~1GB of RAM is required for 1M active time series. Time series is considered active if new data points have been added to it recently or if it has been recently queried. The number of active time series may be obtained from <code class="language-plaintext highlighter-rouge notranslate">vm_cache_entries{type="storage/hour_metric_ids"}</code> metric exported on the <code class="language-plaintext highlighter-rouge notranslate">/metrics</code> page. VictoriaMetrics stores various caches in RAM. Memory size for these caches may be limited with <code class="language-plaintext highlighter-rouge notranslate">-memory.allowedPercent</code> or <code class="language-plaintext highlighter-rouge notranslate">-memory.allowedBytes</code> flags.</p> </li> <li> <p>CPU cores: a CPU core per 300K inserted data points per second. So, ~4 CPU cores are required for processing the insert stream of 1M data points per second. The ingestion rate may be lower for high cardinality data or for time series with high number of labels. See <a href="https://medium.com/@valyala/insert-benchmarks-with-inch-influxdb-vs-victoriametrics-e31a41ae2893">this article</a> for details. If you see lower numbers per CPU core, then it is likely active time series info doesn't fit caches, so you need more RAM for lowering CPU usage.</p> </li> <li> <p>Storage space: less than a byte per data point on average. So, ~260GB is required for storing a month-long insert stream of 100K data points per second. The actual storage size heavily depends on data randomness (entropy). Higher randomness means higher storage size requirements. Read <a href="https://medium.com/faun/victoriametrics-achieving-better-compression-for-time-series-data-than-gorilla-317bc1f95932">this article</a> for details.</p> </li> <li> <p>Network usage: outbound traffic is negligible. Ingress traffic is ~100 bytes per ingested data point via <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write">Prometheus remote_write API</a>. The actual ingress bandwidth usage depends on the average number of labels per ingested metric and the average size of label values. The higher number of per-metric labels and longer label values mean the higher ingress bandwidth.</p> </li> </ul> <p>The required resources for query path:</p> <ul> <li> <p>RAM size: depends on the number of time series to scan in each query and the <code class="language-plaintext highlighter-rouge notranslate">step</code> argument passed to <a href="https://prometheus.io/docs/prometheus/latest/querying/api/#range-queries">/api/v1/query_range</a>. The higher number of scanned time series and lower <code class="language-plaintext highlighter-rouge notranslate">step</code> argument results in the higher RAM usage.</p> </li> <li> <p>CPU cores: a CPU core per 30 millions of scanned data points per second. This means that heavy queries that touch big number of time series (over 10K) and/or big number data points (over 100M) usually require more CPU resources than tiny queries that touch a few time series with small number of data points.</p> </li> <li> <p>Network usage: depends on the frequency and the type of incoming requests. Typical Grafana dashboards usually require negligible network bandwidth.</p> </li> </ul> <h2 id="high-availability">High availability</h2> <ul> <li>Install multiple VictoriaMetrics instances in distinct datacenters (availability zones).</li> <li>Pass addresses of these instances to <a href="https://victoriametrics.github.io/vmagent.html">vmagent</a> via <code class="language-plaintext highlighter-rouge notranslate">-remoteWrite.url</code> command-line flag:</li> </ul> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>/path/to/vmagent <span class="nt">-remoteWrite</span>.url<span class="o">=</span>http://&lt;victoriametrics-addr-1&gt;:8428/api/v1/write <span class="nt">-remoteWrite</span>.url<span class="o">=</span>http://&lt;victoriametrics-addr-2&gt;:8428/api/v1/write
</code></pre>  </div></div> <p>Alternatively these addresses may be passed to <code class="language-plaintext highlighter-rouge notranslate">remote_write</code> section in Prometheus config:</p> <div class="language-yml highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="na">remote_write</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">url</span><span class="pi">:</span> <span class="s">http://&lt;victoriametrics-addr-1&gt;:8428/api/v1/write</span>
    <span class="na">queue_config</span><span class="pi">:</span>
      <span class="na">max_samples_per_send</span><span class="pi">:</span> <span class="m">10000</span>
  <span class="c1"># ...</span>
  <span class="pi">-</span> <span class="na">url</span><span class="pi">:</span> <span class="s">http://&lt;victoriametrics-addr-N&gt;:8428/api/v1/write</span>
    <span class="na">queue_config</span><span class="pi">:</span>
      <span class="na">max_samples_per_send</span><span class="pi">:</span> <span class="m">10000</span>
</code></pre>  </div></div> <ul> <li>Apply the updated config:</li> </ul> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code><span class="nb">kill</span> <span class="nt">-HUP</span> <span class="sb">`</span>pidof prometheus<span class="sb">`</span>
</code></pre>  </div></div> <p>It is recommended to use <a href="https://victoriametrics.github.io/vmagent.html">vmagent</a> instead of Prometheus for highly loaded setups.</p> <ul> <li>Now Prometheus should write data into all the configured <code class="language-plaintext highlighter-rouge notranslate">remote_write</code> urls in parallel.</li> <li>Set up <a href="https://github.com/jacksontj/promxy">Promxy</a> in front of all the VictoriaMetrics replicas.</li> <li>Set up Prometheus datasource in Grafana that points to Promxy.</li> </ul> <p>If you have Prometheus HA pairs with replicas <code class="language-plaintext highlighter-rouge notranslate">r1</code> and <code class="language-plaintext highlighter-rouge notranslate">r2</code> in each pair, then configure each <code class="language-plaintext highlighter-rouge notranslate">r1</code> to write data to <code class="language-plaintext highlighter-rouge notranslate">victoriametrics-addr-1</code>, while each <code class="language-plaintext highlighter-rouge notranslate">r2</code> should write data to <code class="language-plaintext highlighter-rouge notranslate">victoriametrics-addr-2</code>.</p> <p>Another option is to write data simultaneously from Prometheus HA pair to a pair of VictoriaMetrics instances with the enabled de-duplication. See <a href="#deduplication">this section</a> for details.</p> <h2 id="deduplication">Deduplication</h2> <p>VictoriaMetrics de-duplicates data points if <code class="language-plaintext highlighter-rouge notranslate">-dedup.minScrapeInterval</code> command-line flag is set to positive duration. For example, <code class="language-plaintext highlighter-rouge notranslate">-dedup.minScrapeInterval=60s</code> would de-duplicate data points on the same time series if they fall within the same discrete 60s bucket. The earliest data point will be kept. In the case of equal timestamps, an arbitrary data point will be kept.</p> <p>The recommended value for <code class="language-plaintext highlighter-rouge notranslate">-dedup.minScrapeInterval</code> must equal to <code class="language-plaintext highlighter-rouge notranslate">scrape_interval</code> config from Prometheus configs.</p> <p>The de-duplication reduces disk space usage if multiple identically configured Prometheus instances in HA pair write data to the same VictoriaMetrics instance. Note that these Prometheus instances must have identical <code class="language-plaintext highlighter-rouge notranslate">external_labels</code> section in their configs, so they write data to the same time series.</p> <h2 id="retention">Retention</h2> <p>Retention is configured with <code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod</code> command-line flag. For instance, <code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod=3</code> means that the data will be stored for 3 months and then deleted. Data is split in per-month subdirectories inside <code class="language-plaintext highlighter-rouge notranslate">&lt;-storageDataPath&gt;/data/small</code> and <code class="language-plaintext highlighter-rouge notranslate">&lt;-storageDataPath&gt;/data/big</code> folders. Directories for months outside the configured retention are deleted on the first day of new month. In order to keep data according to <code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod</code> max disk space usage is going to be <code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod</code> + 1 month. For example if <code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod</code> is set to 1, data for January is deleted on March 1st. It is safe to extend <code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod</code> on existing data. If <code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod</code> is set to lower value than before then data outside the configured period will be eventually deleted.</p> <p>VictoriaMetrics supports retention smaller than 1 month. For example, <code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod=5d</code> would set data retention for 5 days. Older data is eventually deleted during <a href="https://medium.com/@valyala/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282">background merge</a>.</p> <h2 id="multiple-retentions">Multiple retentions</h2> <p>Just start multiple VictoriaMetrics instances with distinct values for the following flags:</p> <ul> <li><code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod</code></li> <li>
<code class="language-plaintext highlighter-rouge notranslate">-storageDataPath</code>, so the data for each retention period is saved in a separate directory</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">-httpListenAddr</code>, so clients may reach VictoriaMetrics instance with proper retention</li> </ul> <p>Then set up <a href="https://victoriametrics.github.io/vmauth.html">vmauth</a> in front of VictoriaMetrics instances, so it could route requests from particular user to VictoriaMetrics with the desired retention. The same scheme could be implemented for multiple tenants in <a href="https://victoriametrics.github.io/Cluster-VictoriaMetrics.html">VictoriaMetrics cluster</a>.</p> <h2 id="downsampling">Downsampling</h2> <p>There is no downsampling support at the moment, but:</p> <ul> <li>VictoriaMetrics is optimized for querying big amounts of raw data. See benchmark results for heavy queries in <a href="https://medium.com/@valyala/measuring-vertical-scalability-for-time-series-databases-in-google-cloud-92550d78d8ae">this article</a>.</li> <li>VictoriaMetrics has good compression for on-disk data. See <a href="https://medium.com/@valyala/victoriametrics-achieving-better-compression-for-time-series-data-than-gorilla-317bc1f95932">this article</a> for details.</li> </ul> <p>These properties reduce the need of downsampling. We plan to implement downsampling in the future. See <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues/36">this issue</a> for details.</p> <p>It is possible to (ab)use <a href="#deduplication">-dedup.minScrapeInterval</a> for basic downsampling. For instance, if interval between the ingested data points is 15s, then <code class="language-plaintext highlighter-rouge notranslate">-dedup.minScrapeInterval=5m</code> will leave only a single data point out of 20 initial data points per each 5m interval.</p> <h2 id="multi-tenancy">Multi-tenancy</h2> <p>Single-node VictoriaMetrics doesn't support multi-tenancy. Use <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/tree/cluster">cluster version</a> instead.</p> <h2 id="scalability-and-cluster-version">Scalability and cluster version</h2> <p>Though single-node VictoriaMetrics cannot scale to multiple nodes, it is optimized for resource usage - storage size / bandwidth / IOPS, RAM, CPU. This means that a single-node VictoriaMetrics may scale vertically and substitute a moderately sized cluster built with competing solutions such as Thanos, Uber M3, InfluxDB or TimescaleDB. See <a href="https://medium.com/@valyala/measuring-vertical-scalability-for-time-series-databases-in-google-cloud-92550d78d8ae">vertical scalability benchmarks</a>.</p> <p>So try single-node VictoriaMetrics at first and then <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/tree/cluster">switch to cluster version</a> if you still need horizontally scalable long-term remote storage for really large Prometheus deployments. <a href="mailto:info@victoriametrics.com">Contact us</a> for paid support.</p> <h2 id="alerting">Alerting</h2> <p>It is recommended using <a href="https://victoriametrics.github.io/vmalert.html">vmalert</a> for alerting.</p> <p>Additionally, alerting can be set up with the following tools:</p> <ul> <li>With Prometheus - see <a href="https://prometheus.io/docs/alerting/overview/">the corresponding docs</a>.</li> <li>With Promxy - see <a href="https://github.com/jacksontj/promxy/blob/master/README.md#how-do-i-use-alertingrecording-rules-in-promxy">the corresponding docs</a>.</li> <li>With Grafana - see <a href="https://grafana.com/docs/alerting/rules/">the corresponding docs</a>.</li> </ul> <h2 id="security">Security</h2> <p>Do not forget protecting sensitive endpoints in VictoriaMetrics when exposing it to untrusted networks such as the internet. Consider setting the following command-line flags:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">-tls</code>, <code class="language-plaintext highlighter-rouge notranslate">-tlsCertFile</code> and <code class="language-plaintext highlighter-rouge notranslate">-tlsKeyFile</code> for switching from HTTP to HTTPS.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">-httpAuth.username</code> and <code class="language-plaintext highlighter-rouge notranslate">-httpAuth.password</code> for protecting all the HTTP endpoints with <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">HTTP Basic Authentication</a>.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">-deleteAuthKey</code> for protecting <code class="language-plaintext highlighter-rouge notranslate">/api/v1/admin/tsdb/delete_series</code> endpoint. See <a href="#how-to-delete-time-series">how to delete time series</a>.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">-snapshotAuthKey</code> for protecting <code class="language-plaintext highlighter-rouge notranslate">/snapshot*</code> endpoints. See <a href="#how-to-work-with-snapshots">how to work with snapshots</a>.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">-forceMergeAuthKey</code> for protecting <code class="language-plaintext highlighter-rouge notranslate">/internal/force_merge</code> endpoint. See <a href="#forced-merge">force merge docs</a>.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">-search.resetCacheAuthKey</code> for protecting <code class="language-plaintext highlighter-rouge notranslate">/internal/resetRollupResultCache</code> endpoint. See <a href="#backfilling">backfilling</a> for more details.</li> </ul> <p>Explicitly set internal network interface for TCP and UDP ports for data ingestion with Graphite and OpenTSDB formats. For example, substitute <code class="language-plaintext highlighter-rouge notranslate">-graphiteListenAddr=:2003</code> with <code class="language-plaintext highlighter-rouge notranslate">-graphiteListenAddr=&lt;internal_iface_ip&gt;:2003</code>.</p> <p>Prefer authorizing all the incoming requests from untrusted networks with <a href="https://victoriametrics.github.io/vmauth.html">vmauth</a> or similar auth proxy.</p> <h2 id="tuning">Tuning</h2> <ul> <li>There is no need for VictoriaMetrics tuning since it uses reasonable defaults for command-line flags, which are automatically adjusted for the available CPU and RAM resources.</li> <li>There is no need for Operating System tuning since VictoriaMetrics is optimized for default OS settings. The only option is increasing the limit on <a href="https://medium.com/@muhammadtriwibowo/set-permanently-ulimit-n-open-files-in-ubuntu-4d61064429a">the number of open files in the OS</a>, so Prometheus instances could establish more connections to VictoriaMetrics.</li> <li>The recommended filesystem is <code class="language-plaintext highlighter-rouge notranslate">ext4</code>, the recommended persistent storage is <a href="https://cloud.google.com/compute/docs/disks/#pdspecs">persistent HDD-based disk on GCP</a>, since it is protected from hardware failures via internal replication and it can be <a href="https://cloud.google.com/compute/docs/disks/add-persistent-disk#resize_pd">resized on the fly</a>. If you plan to store more than 1TB of data on <code class="language-plaintext highlighter-rouge notranslate">ext4</code> partition or plan extending it to more than 16TB, then the following options are recommended to pass to <code class="language-plaintext highlighter-rouge notranslate">mkfs.ext4</code>:</li> </ul> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>mkfs.ext4 ... <span class="nt">-O</span> 64bit,huge_file,extent <span class="nt">-T</span> huge
</code></pre>  </div></div> <h2 id="monitoring">Monitoring</h2> <p>VictoriaMetrics exports internal metrics in Prometheus format at <code class="language-plaintext highlighter-rouge notranslate">/metrics</code> page. These metrics may be collected by <a href="https://victoriametrics.github.io/vmagent.html">vmagent</a> or Prometheus by adding the corresponding scrape config to it. Alternatively they can be self-scraped by setting <code class="language-plaintext highlighter-rouge notranslate">-selfScrapeInterval</code> command-line flag to duration greater than 0. For example, <code class="language-plaintext highlighter-rouge notranslate">-selfScrapeInterval=10s</code> would enable self-scraping of <code class="language-plaintext highlighter-rouge notranslate">/metrics</code> page with 10 seconds interval.</p> <p>There are officials Grafana dashboards for <a href="https://grafana.com/dashboards/10229">single-node VictoriaMetrics</a> and <a href="https://grafana.com/grafana/dashboards/11176">clustered VictoriaMetrics</a>. There is also an <a href="https://grafana.com/grafana/dashboards/11831">alternative dashboard for clustered VictoriaMetrics</a>.</p> <p>The most interesting metrics are:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge notranslate">vm_cache_entries{type="storage/hour_metric_ids"}</code> - the number of time series with new data points during the last hour aka active time series.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">increase(vm_new_timeseries_created_total[1h])</code> - time series churn rate during the previous hour.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">sum(vm_rows{type=~"storage/.*"})</code> - total number of <code class="language-plaintext highlighter-rouge notranslate">(timestamp, value)</code> data points in the database.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">sum(rate(vm_rows_inserted_total[5m]))</code> - ingestion rate, i.e. how many samples are inserted int the database per second.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">vm_free_disk_space_bytes</code> - free space left at <code class="language-plaintext highlighter-rouge notranslate">-storageDataPath</code>.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">sum(vm_data_size_bytes)</code> - the total size of data on disk.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">increase(vm_slow_row_inserts_total[5m])</code> - the number of slow inserts during the last 5 minutes. If this number remains high during extended periods of time, then it is likely more RAM is needed for optimal handling of the current number of active time series.</li> <li>
<code class="language-plaintext highlighter-rouge notranslate">increase(vm_slow_metric_name_loads_total[5m])</code> - the number of slow loads of metric names during the last 5 minutes. If this number remains high during extended periods of time, then it is likely more RAM is needed for optimal handling of the current number of active time series.</li> </ul> <p>VictoriaMetrics also exposes currently running queries with their execution times at <code class="language-plaintext highlighter-rouge notranslate">/api/v1/status/active_queries</code> page.</p> <p>See the example of alerting rules for VM components <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/blob/master/deployment/docker/alerts.yml">here</a>.</p> <h2 id="troubleshooting">Troubleshooting</h2> <ul> <li> <p>It is recommended to use default command-line flag values (i.e. don't set them explicitly) until the need of tweaking these flag values arises.</p> </li> <li> <p>It is recommended upgrading to the latest available release from <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases">this page</a>, since the encountered issue could be already fixed there.</p> </li> <li> <p>It is recommended inspecting logs during troubleshooting, since they may contain useful information.</p> </li> <li>VictoriaMetrics buffers incoming data in memory for up to a few seconds before flushing it to persistent storage. This may lead to the following "issues": <ul> <li>Data becomes available for querying in a few seconds after inserting. It is possible to flush in-memory buffers to persistent storage by requesting <code class="language-plaintext highlighter-rouge notranslate">/internal/force_flush</code> http handler. This handler is mostly needed for testing and debugging purposes.</li> <li>The last few seconds of inserted data may be lost on unclean shutdown (i.e. OOM, <code class="language-plaintext highlighter-rouge notranslate">kill -9</code> or hardware reset). See <a href="https://valyala.medium.com/wal-usage-looks-broken-in-modern-time-series-databases-b62a627ab704">this article for technical details</a>.</li> </ul> </li> <li> <p>If VictoriaMetrics works slowly and eats more than a CPU core per 100K ingested data points per second, then it is likely you have too many active time series for the current amount of RAM. VictoriaMetrics <a href="#monitoring">exposes</a> <code class="language-plaintext highlighter-rouge notranslate">vm_slow_*</code> metrics, which could be used as an indicator of low amounts of RAM. It is recommended increasing the amount of RAM on the node with VictoriaMetrics in order to improve ingestion and query performance in this case.</p> </li> <li> <p>VictoriaMetrics prioritizes data ingestion over data querying. So if it has no enough resources for data ingestion, then data querying may slow down significantly.</p> </li> <li> <p>VictoriaMetrics requires free disk space for <a href="https://medium.com/@valyala/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282">merging data files to bigger ones</a>. It may slow down when there is no enough free space left. So make sure <code class="language-plaintext highlighter-rouge notranslate">-storageDataPath</code> directory has at least 20% of free space comparing to disk size. The remaining amount of free space can be <a href="#monitoring">monitored</a> via <code class="language-plaintext highlighter-rouge notranslate">vm_free_disk_space_bytes</code> metric. The total size of data stored on the disk can be monitored via sum of <code class="language-plaintext highlighter-rouge notranslate">vm_data_size_bytes</code> metrics. See also <code class="language-plaintext highlighter-rouge notranslate">vm_merge_need_free_disk_space</code> metrics, which are set to values higher than 0 if background merge cannot be initiated due to free disk space shortage. The value shows the number of per-month partitions, which would start background merge if they had more free disk space.</p> </li> <li> <p>If VictoriaMetrics doesn't work because of certain parts are corrupted due to disk errors, then just remove directories with broken parts. It is safe removing subdirectories under <code class="language-plaintext highlighter-rouge notranslate">&lt;-storageDataPath&gt;/data/{big,small}/YYYY_MM</code> directories when VictoriaMetrics isn't running. This recovers VictoriaMetrics at the cost of data loss stored in the deleted broken parts. In the future, <code class="language-plaintext highlighter-rouge notranslate">vmrecover</code> tool will be created for automatic recovering from such errors.</p> </li> <li> <p>If you see gaps on the graphs, try resetting the cache by sending request to <code class="language-plaintext highlighter-rouge notranslate">/internal/resetRollupResultCache</code>. If this removes gaps on the graphs, then it is likely data with timestamps older than <code class="language-plaintext highlighter-rouge notranslate">-search.cacheTimestampOffset</code> is ingested into VictoriaMetrics. Make sure that data sources have synchronized time with VictoriaMetrics.</p> <p>If the gaps are related to irregular intervals between samples, then try adjusting <code class="language-plaintext highlighter-rouge notranslate">-search.minStalenessInterval</code> command-line flag to value close to the maximum interval between samples.</p> </li> <li> <p>If you are switching from InfluxDB or TimescaleDB, then take a look at <code class="language-plaintext highlighter-rouge notranslate">-search.maxStalenessInterval</code> command-line flag. It may be needed in order to suppress default gap filling algorithm used by VictoriaMetrics - by default it assumes each time series is continuous instead of discrete, so it fills gaps between real samples with regular intervals.</p> </li> <li> <p>Metrics and labels leading to high cardinality or high churn rate can be determined at <code class="language-plaintext highlighter-rouge notranslate">/api/v1/status/tsdb</code> page. See <a href="https://prometheus.io/docs/prometheus/latest/querying/api/#tsdb-stats">these docs</a> for details. VictoriaMetrics accepts optional <code class="language-plaintext highlighter-rouge notranslate">date=YYYY-MM-DD</code> and <code class="language-plaintext highlighter-rouge notranslate">topN=42</code> args on this page. By default <code class="language-plaintext highlighter-rouge notranslate">date</code> equals to the current date, while <code class="language-plaintext highlighter-rouge notranslate">topN</code> equals to 10.</p> </li> <li> <p>VictoriaMetrics limits the number of labels per each metric with <code class="language-plaintext highlighter-rouge notranslate">-maxLabelsPerTimeseries</code> command-line flag. This prevents from ingesting metrics with too many labels. It is recommended <a href="#monitoring">monitoring</a> <code class="language-plaintext highlighter-rouge notranslate">vm_metrics_with_dropped_labels_total</code> metric in order to determine whether <code class="language-plaintext highlighter-rouge notranslate">-maxLabelsPerTimeseries</code> must be adjusted for your workload.</p> </li> <li> <p>If you store Graphite metrics like <code class="language-plaintext highlighter-rouge notranslate">foo.bar.baz</code> in VictoriaMetrics, then use <code class="language-plaintext highlighter-rouge notranslate">{__graphite__="foo.*.baz"}</code> syntax for selecting such metrics. This expression is equivalent to <code class="language-plaintext highlighter-rouge notranslate">{__name__=~"foo[.][^.]*[.]baz"}</code>, but it works faster and it is easier to use when migrating from Graphite.</p> </li> <li>VictoriaMetrics ignores <code class="language-plaintext highlighter-rouge notranslate">NaN</code> values during data ingestion.</li> </ul> <h2 id="data-migration">Data migration</h2> <p>Use <a href="https://victoriametrics.github.io/vmctl.html">vmctl</a> for data migration. It supports the following data migration types:</p> <ul> <li>From Prometheus to VictoriaMetrics</li> <li>From InfluxDB to VictoriaMetrics</li> <li>From VictoriaMetrics to VictoriaMetrics</li> </ul> <p>See <a href="https://victoriametrics.github.io/vmctl.html">vmctl docs</a> for more details.</p> <h2 id="backfilling">Backfilling</h2> <p>VictoriaMetrics accepts historical data in arbitrary order of time via <a href="#how-to-import-time-series-data">any supported ingestion method</a>. Make sure that configured <code class="language-plaintext highlighter-rouge notranslate">-retentionPeriod</code> covers timestamps for the backfilled data.</p> <p>It is recommended disabling query cache with <code class="language-plaintext highlighter-rouge notranslate">-search.disableCache</code> command-line flag when writing historical data with timestamps from the past, since the cache assumes that the data is written with the current timestamps. Query cache can be enabled after the backfilling is complete.</p> <p>An alternative solution is to query <code class="language-plaintext highlighter-rouge notranslate">/internal/resetRollupResultCache</code> url after backfilling is complete. This will reset the query cache, which could contain incomplete data cached during the backfilling.</p> <p>Yet another solution is to increase <code class="language-plaintext highlighter-rouge notranslate">-search.cacheTimestampOffset</code> flag value in order to disable caching for data with timestamps close to the current time. Single-node VictoriaMetrics automatically resets response cache when samples with timestamps older than <code class="language-plaintext highlighter-rouge notranslate">now - search.cacheTimestampOffset</code> are ingested to it.</p> <h2 id="data-updates">Data updates</h2> <p>VictoriaMetrics doesn't support updating already existing sample values to new ones. It stores all the ingested data points for the same time series with identical timestamps. While it is possible substituting old time series with new time series via <a href="#how-to-delete-timeseries">removal of old time series</a> and then <a href="#backfilling">writing new time series</a>, this approach should be used only for one-off updates. It shouldn't be used for frequent updates because of non-zero overhead related to data removal.</p> <h2 id="replication">Replication</h2> <p>Single-node VictoriaMetrics doesn't support application-level replication. Use cluster version instead. See <a href="https://victoriametrics.github.io/Cluster-VictoriaMetrics.html#replication-and-data-safety">these docs</a> for details.</p> <p>Storage-level replication may be offloaded to durable persistent storage such as <a href="https://cloud.google.com/compute/docs/disks#pdspecs">Google Cloud disks</a>.</p> <p>See also <a href="#high-availability">high availability docs</a> and <a href="#backups">backup docs</a>.</p> <h2 id="backups">Backups</h2> <p>VictoriaMetrics supports backups via <a href="https://victoriametrics.github.io/vmbackup.html">vmbackup</a> and <a href="https://victoriametrics.github.io/vmrestore.html">vmrestore</a> tools. We also provide <code class="language-plaintext highlighter-rouge notranslate">vmbackupmanager</code> tool for paid enterprise subscribers - see <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues/466">this issue</a> for details.</p> <h2 id="profiling">Profiling</h2> <p>VictoriaMetrics provides handlers for collecting the following <a href="https://blog.golang.org/profiling-go-programs">Go profiles</a>:</p> <ul> <li>Memory profile. It can be collected with the following command:</li> </ul> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-s</span> http://&lt;victoria-metrics-host&gt;:8428/debug/pprof/heap <span class="o">&gt;</span> mem.pprof
</code></pre>  </div></div> <ul> <li>CPU profile. It can be collected with the following command:</li> </ul> <div class="language-bash highlighter-rouge notranslate"><div class="highlight">
<pre class="highlight"><code>curl <span class="nt">-s</span> http://&lt;victoria-metrics-host&gt;:8428/debug/pprof/profile <span class="o">&gt;</span> cpu.pprof
</code></pre>  </div></div> <p>The command for collecting CPU profile waits for 30 seconds before returning.</p> <p>The collected profiles may be analyzed with <a href="https://github.com/google/pprof">go tool pprof</a>.</p> <h2 id="integrations">Integrations</h2> <ul> <li>
<a href="https://github.com/VictoriaMetrics/helm-charts">Helm charts for single-node and cluster versions of VictoriaMetrics</a>.</li> <li>
<a href="https://github.com/VictoriaMetrics/operator">Kubernetes operator for VictoriaMetrics</a>.</li> <li>
<a href="https://github.com/netdata/netdata">netdata</a> can push data into VictoriaMetrics via <code class="language-plaintext highlighter-rouge notranslate">Prometheus remote_write API</code>. See <a href="https://github.com/netdata/netdata#integrations">these docs</a>.</li> <li>
<a href="https://github.com/go-graphite/carbonapi">go-graphite/carbonapi</a> can use VictoriaMetrics as time series backend. See <a href="https://github.com/go-graphite/carbonapi/blob/main/cmd/carbonapi/carbonapi.example.victoriametrics.yaml">this example</a>.</li> <li>
<a href="https://github.com/dreamteam-gg/ansible-victoriametrics-role">Ansible role for installing single-node VictoriaMetrics</a>.</li> <li>
<a href="https://github.com/Slapper/ansible-victoriametrics-cluster-role">Ansible role for installing cluster VictoriaMetrics</a>.</li> <li>
<a href="https://snapcraft.io/victoriametrics">Snap package for VictoriaMetrics</a>.</li> <li>
<a href="https://github.com/aorfanos/vmalert-cli">vmalert-cli</a> - a CLI application for managing <a href="https://victoriametrics.github.io/vmalert.html">vmalert</a>.</li> </ul> <h2 id="third-party-contributions">Third-party contributions</h2> <ul> <li>
<a href="https://copr.fedorainfracloud.org/coprs/antonpatsev/VictoriaMetrics/">Unofficial yum repository</a> (<a href="https://github.com/patsevanton/victoriametrics-rpm">source code</a>)</li> <li><a href="https://github.com/ryotarai/prometheus-tsdb-dump">Prometheus -&gt; VictoriaMetrics exporter #1</a></li> <li><a href="https://github.com/AnchorFree/tsdb-remote-write">Prometheus -&gt; VictoriaMetrics exporter #2</a></li> <li>
<a href="https://gitlab.com/optima_public/prometheus_oauth_proxy">Prometheus Oauth proxy</a> - see <a href="https://medium.com/@richard.holly/powerful-saas-solution-for-detection-metrics-c67b9208d362">this article</a> for details.</li> </ul> <h2 id="contacts">Contacts</h2> <p>Contact us with any questions regarding VictoriaMetrics at <a href="mailto:info@victoriametrics.com">info@victoriametrics.com</a>.</p> <h2 id="community-and-contributions">Community and contributions</h2> <p>Feel free asking any questions regarding VictoriaMetrics:</p> <ul> <li><a href="http://slack.victoriametrics.com/">slack</a></li> <li><a href="https://www.reddit.com/r/VictoriaMetrics/">reddit</a></li> <li><a href="https://t.me/VictoriaMetrics_en">telegram-en</a></li> <li><a href="https://t.me/VictoriaMetrics_ru1">telegram-ru</a></li> <li><a href="https://groups.google.com/forum/#!forum/victorametrics-users">google groups</a></li> </ul> <p>If you like VictoriaMetrics and want to contribute, then we need the following:</p> <ul> <li>Filing issues and feature requests <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues">here</a>.</li> <li>Spreading a word about VictoriaMetrics: conference talks, articles, comments, experience sharing with colleagues.</li> <li>Updating documentation.</li> </ul> <p>We are open to third-party pull requests provided they follow <a href="https://en.wikipedia.org/wiki/KISS_principle">KISS design principle</a>:</p> <ul> <li>Prefer simple code and architecture.</li> <li>Avoid complex abstractions.</li> <li>Avoid magic code and fancy algorithms.</li> <li>Avoid <a href="https://medium.com/@valyala/stripping-dependency-bloat-in-victoriametrics-docker-image-983fb5912b0d">big external dependencies</a>.</li> <li>Minimize the number of moving parts in the distributed system.</li> <li>Avoid automated decisions, which may hurt cluster availability, consistency or performance.</li> </ul> <p>Adhering <code class="language-plaintext highlighter-rouge notranslate">KISS</code> principle simplifies the resulting code and architecture, so it can be reviewed, understood and verified by many people.</p> <h2 id="reporting-bugs">Reporting bugs</h2> <p>Report bugs and propose new features <a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues">here</a>.</p> <h2 id="victoria-metrics-logo">Victoria Metrics Logo</h2> <p><a href="VM_logo.zip">Zip</a> contains three folders with different image orientations (main color and inverted version).</p> <p>Files included in each folder:</p> <ul> <li>2 JPEG Preview files</li> <li>2 PNG Preview files with transparent background</li> <li>2 EPS Adobe Illustrator EPS10 files</li> </ul> <h3 id="logo-usage-guidelines">Logo Usage Guidelines</h3> <h4 id="font-used">Font used</h4> <ul> <li>Lato Black</li> <li>Lato Regular</li> </ul> <h4 id="color-palette">Color Palette</h4> <ul> <li>HEX <a href="https://www.color-hex.com/color/110f0f">#110f0f</a>
</li> <li>HEX <a href="https://www.color-hex.com/color/ffffff">#ffffff</a>
</li> </ul> <h3 id="we-kindly-ask">We kindly ask</h3> <ul> <li>Please don't use any other font instead of suggested.</li> <li>There should be sufficient clear space around the logo.</li> <li>Do not change spacing, alignment, or relative locations of the design elements.</li> <li>Do not change the proportions of any of the design elements or the design itself. You may resize as needed but must retain all proportions.</li> </ul> </div> </div> <div class="navigation-bottom d-flex flex-justify-between py-3" role="navigation" aria-label="footer navigation"> <div class="prev"><a href="/SampleSizeCalculations.html" class="btn" title="Sample size calculations" accesskey="p" rel="prev"> <i class="fa fa-arrow-circle-left"></i> Previous </a></div> <div class="next"><a href="/vmagent.html" class="btn" title="vmagent" accesskey="n" rel="next"> Next <i class="fa fa-arrow-circle-right"></i> </a></div> </div>
<hr> <div class="copyright text-center text-gray" role="contentinfo"> <i class="fa fa-copyright"></i> <span class="time">2021,</span> <a class="text-gray" href="https://github.com/Brensted" rel="noreferrer" target="_blank">Brensted</a> Revision <a class="text-gray" href="https://github.com/Brensted/test1/commit/156072bda364bc719a657b8c14a5f5ba4c757132" title="156072bda364bc719a657b8c14a5f5ba4c757132" rel="noreferrer" target="_blank">156072b</a> <br> <div class="generator"> Built with <a href="https://pages.github.com" rel="noreferrer" target="_blank" title="github-pages v209">GitHub Pages</a> using a <a href="https://github.com/rundocs/jekyll-rtd-theme" rel="noreferrer" target="_blank" title="rundocs/jekyll-rtd-theme v2.0.10">theme</a> provided by <a href="https://rundocs.io" rel="noreferrer" target="_blank">RunDocs</a>. </div> </div> </div> </div> <div class="addons-wrap d-flex flex-column overflow-y-auto"> <div class="status d-flex flex-justify-between p-2"> <div class="title p-1"> <i class="fa fa-book"></i> VictoriaMetrics </div> <div class="branch p-1"> <span class="name"> gh-pages </span> <i class="fa fa-caret-down"></i> </div> </div> <div class="addons d-flex flex-column height-full p-2 d-none"> <dl> <dt>GitHub</dt> <dd> <a href="https://github.com/Brensted/test1" title="Stars: 0"> <i class="fa fa-github"></i> Homepage </a> </dd> <dd> <a href="https://github.com/Brensted/test1/issues" title="Open issues: 0"> <i class="fa fa-question-circle-o"></i> Issues </a> </dd> <dd> <a href="https://github.com/Brensted/test1/zipball/gh-pages" title="Size: 0 Kb"> <i class="fa fa-download"></i> Download </a> </dd> </dl> <hr> <div class="license f6 pb-2"> This <a href="/" title="VictoriaMetrics">Software</a> is under the terms of <a href="https://github.com/Brensted/test1">The Unlicense</a>. </div> </div> </div> <script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/theme.min.js"></script> </body> </html>